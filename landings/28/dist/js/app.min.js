"use strict";function Notify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Default message",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n=document.querySelector(".notify"),o=document.createElement("div"),a=document.createTextNode(e),r=document.body;return n&&r.removeChild(n),o.classList.add("notify"),o.addEventListener("click",function(e){return e.target.style.opacity=0}),o.appendChild(a),setTimeout(function(){o.style.opacity=1,o.style.transform="translateY(0)"},300),setTimeout(function(){o.style.opacity=0,o.style.transform="translateY(200%)"},t),r.appendChild(o)}$(document).ready(function(){var e=function(e){var t,n,o=window.location.search.substring(1).split("&");for(n=0;n<o.length;n++)if((t=o[n].split("="))[0]===e)return void 0===t[1]||decodeURIComponent(t[1])},t=e("kw"),n=e("location");$(".kw").append(t),$(".location").append(n),$(".video-play").vide("/static/7/images/video/video",{posterType:"jpg",className:"video-container"})}),$(".clients__container").owlCarousel({loop:!0,dots:!1,nav:!0,navText:["",""],autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,margin:10,responsive:{0:{items:1},768:{items:2,autoWidth:!0},1020:{items:3,autoWidth:!0},1280:{items:4}}}),$(".about__awards").owlCarousel({loop:!0,dots:!1,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,nav:!0,navText:["",""],responsive:{0:{items:1},768:{items:3},1250:{items:4}}}),AOS.init();var newsletter=document.querySelector(".newsletter"),newsletterOk=document.querySelectorAll(".popup-ok"),docHeight=document.querySelector("body").offsetHeight,triggerHeight=.75*docHeight-window.innerHeight,newsLetterKey="isNewsletter",twoWeeks=12096e5,dateNow=Date.now(),newsLetterShown={date:dateNow+twoWeeks,shown:!0};function showNewsletterPopup(){var e=JSON.parse(localStorage.getItem(newsLetterKey));if(!e||e.date<dateNow)return newsletter&&newsletter.classList.add("newsletter--show")}if(newsletterOk&&[].forEach.call(newsletterOk,function(e){e.addEventListener("click",function(){newsletter.classList.remove("newsletter--show"),localStorage.setItem(newsLetterKey,JSON.stringify(newsLetterShown))})}),window.addEventListener("scroll",function(){window.scrollY>triggerHeight&&showNewsletterPopup()}),$(document).on("click",'a[href^="#"]',function(e){e.preventDefault(),$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top},500)}),$(".footer__year").length){var currentYear=(new Date).getFullYear();$(".footer__year").text(currentYear)}$('html[lang="no"]').length&&($(".work__cta").addClass("work__cta--no"),$(".work__cta-title").addClass("work__cta-title--no"),$(".competence__content").addClass("competence__content--no"));var owl=$("#ranking"),form=$("#formRanking");function fillInOwlInit(e,t,n,o,a,r,i,s,l,d,c,u,m,p,f){var h=void 0,w=0,g=1,y=[];function v(){(h=$(t+" .owl-dot")).length&&!c&&k()}function k(){w+=50/(60*i),g-=1/(60*i),$(h[b()]).find("span").css({"border-color":"rgba("+s+", "+g+")"}),window.innerWidth<=599?$(h[_()]).find("span").css({"border-left":"solid "+w/2+"px rgba("+s+", 1)"}):$(h[_()]).find("span").css({"border-left":"solid "+w+"px rgba("+s+", 1)"}),w<50?y.push(requestAnimationFrame(k)):(w=0,g=1,$(h[b()]).find("span").removeAttr("style"),$(h[_()]).find("span").css({"border-left":""}),h.one("click",function(){y.forEach(function(e){cancelAnimationFrame(e)}),y=[]}),h[_()].click())}function _(){var e=0;return $.each(h,function(t,n){$(n).hasClass("active")&&t<h.length-1&&(e=t+1)}),e}function b(){var e=h.length-1;return $.each(h,function(t,n){$(n).hasClass("active")&&t<h.length-1&&(e=t)}),e}e.length>0&&e.owlCarousel({loop:u,lazyLoad:!0,margin:l,nav:c,items:o,dots:m,autoplay:n,autoplayTimeout:7e3,autoplaySpeed:2e3,smartSpeed:600,onInitialized:v,onChange:function(e){"position"===e.property.name&&(w=50);h.find("span").removeAttr("style"),w=0,g=1},onChanged:v,responsive:{0:{items:d?2:1,margin:0,dots:f,nav:!1,loop:!0,autoplay:!1,autoplayTimeout:p},600:{items:d?r:a,margin:d?25:l},1e3:{items:r,margin:d?25:l}}})}fillInOwlInit(owl,".ranking",!0,4,4,7,10,"0, 110, 250",5,!1,!1,!1,!0,2e3,!1,5),fillInOwlInit(form,".ranking-form",!1,4,2,3,6,"255, 255, 255",10,!0,!1,!1,!0,2e3,!0,9),$.validator.methods.number=function(e,t){return this.optional(t)||/^[0-9+\-() â€”]+$/.test(e)};var hide=function(e){return e.style.display="none"};$("form").each(function(){$(this).validate({showErrors:function(e,t){e.attach&&Notify(uploadErrorMessage,notifyDelay),this.defaultShowErrors()},rules:{name:{required:!0,maxlength:255},last_name:{required:!0,maxlength:255},position:{required:!0,maxlength:255},company:{required:!0,maxlength:255},email:{required:!0,email:!0,maxlength:255},phone:{required:!0,number:!0,maxlength:255,minlength:5},description:{required:!1,maxlength:65535}},messages:{email:{email:"Please enter a valid email address."}},submitHandler:function(e,t){t.preventDefault();var n=new FormData(e),o=e.getAttribute("data-url"),a=e.querySelector(".registration__error");e.nextElementSibling;n.append("handler_id",e.dataset.handler),handleFormSubmit(o,n,{type:e.dataset.type}).then(function(e){e.data.status?($(".notification").show(),$("form").trigger("reset")):(a.textContent="Check selected fields, please.",show(a)),Object.keys(e.data).length>1&&Object.keys(e.data).map(function(e){var t=e.split("-")[1];return document.querySelector("[name="+t+"]").classList.add("has-error")})}).catch(function(e){console.log(e)})}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiTm90aWZ5IiwibWVzc2FnZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImRlbGF5IiwiZXhpc3RpbmdOb3RpZnkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ3cmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsInRleHROb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJib2R5IiwicmVtb3ZlQ2hpbGQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsInN0eWxlIiwib3BhY2l0eSIsImFwcGVuZENoaWxkIiwic2V0VGltZW91dCIsInRyYW5zZm9ybSIsIiQiLCJyZWFkeSIsImdldFVybFBhcmFtZXRlciIsInNQYXJhbSIsInNQYXJhbWV0ZXJOYW1lIiwiaSIsInNVUkxWYXJpYWJsZXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsInN1YnN0cmluZyIsInNwbGl0IiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwia3ciLCJhcHBlbmQiLCJ2aWRlIiwicG9zdGVyVHlwZSIsImNsYXNzTmFtZSIsIm93bENhcm91c2VsIiwibG9vcCIsImRvdHMiLCJuYXYiLCJuYXZUZXh0IiwiYXV0b3BsYXkiLCJhdXRvcGxheVRpbWVvdXQiLCJhdXRvcGxheUhvdmVyUGF1c2UiLCJtYXJnaW4iLCJyZXNwb25zaXZlIiwiMCIsIml0ZW1zIiwiNzY4IiwiYXV0b1dpZHRoIiwiMTAyMCIsIjEyODAiLCIxMjUwIiwiQU9TIiwiaW5pdCIsIm5ld3NsZXR0ZXIiLCJuZXdzbGV0dGVyT2siLCJxdWVyeVNlbGVjdG9yQWxsIiwiZG9jSGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwidHJpZ2dlckhlaWdodCIsImlubmVySGVpZ2h0IiwibmV3c0xldHRlcktleSIsInR3b1dlZWtzIiwiZGF0ZU5vdyIsIkRhdGUiLCJub3ciLCJuZXdzTGV0dGVyU2hvd24iLCJkYXRlIiwic2hvd24iLCJzaG93TmV3c2xldHRlclBvcHVwIiwiaXNOZXdzTGV0dGVyIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImZvckVhY2giLCJjYWxsIiwiaXRlbSIsInJlbW92ZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJzY3JvbGxZIiwib24iLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsImF0dHIiLCJ0aGlzIiwib2Zmc2V0IiwidG9wIiwiY3VycmVudFllYXIiLCJnZXRGdWxsWWVhciIsInRleHQiLCJhZGRDbGFzcyIsIm93bCIsImZvcm0iLCJmaWxsSW5Pd2xJbml0Iiwic2xpZGVyQ29udGFpbmVyIiwiaXRlbXNNb2JpbGUiLCJpdGVtc1RhYmxldCIsInNwZWVkIiwiY29sb3IiLCJkb3QiLCJhdXRvcGxheVRpbWVvdXRNb2JpbGUiLCJkb3RNb2JpbGUiLCJ3aWR0aCIsIndpZHRoQW5pbSIsIm93bEluaXRGdW5jdGlvbiIsInN0ZXAiLCJnZXRQcmV2SXRlbSIsImZpbmQiLCJjc3MiLCJib3JkZXItY29sb3IiLCJpbm5lcldpZHRoIiwiZ2V0TmV4dEl0ZW0iLCJib3JkZXItbGVmdCIsInB1c2giLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyZW1vdmVBdHRyIiwib25lIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJjbGljayIsIm5leHRJdGVtSW5kZXgiLCJlYWNoIiwiaW5kZXgiLCJoYXNDbGFzcyIsInByZXZJdGVtIiwibGF6eUxvYWQiLCJhdXRvcGxheVNwZWVkIiwic21hcnRTcGVlZCIsIm9uSW5pdGlhbGl6ZWQiLCJvbkNoYW5nZSIsInByb3AiLCJwcm9wZXJ0eSIsIm5hbWUiLCJvbkNoYW5nZWQiLCI2MDAiLCIxMDAwIiwidmFsaWRhdG9yIiwibWV0aG9kcyIsIm51bWJlciIsInZhbHVlIiwiZWxlbWVudCIsIm9wdGlvbmFsIiwidGVzdCIsImhpZGUiLCJlbGVtIiwiZGlzcGxheSIsInZhbGlkYXRlIiwic2hvd0Vycm9ycyIsImVycm9yTWFwIiwiZXJyb3JMaXN0IiwidXBsb2FkRXJyb3JNZXNzYWdlIiwibm90aWZ5RGVsYXkiLCJkZWZhdWx0U2hvd0Vycm9ycyIsInJ1bGVzIiwicmVxdWlyZWQiLCJtYXhsZW5ndGgiLCJsYXN0X25hbWUiLCJwb3NpdGlvbiIsImNvbXBhbnkiLCJlbWFpbCIsInBob25lIiwibWlubGVuZ3RoIiwiZGVzY3JpcHRpb24iLCJtZXNzYWdlcyIsInN1Ym1pdEhhbmRsZXIiLCJyb3dEYXRhIiwiRm9ybURhdGEiLCJ1cmwiLCJnZXRBdHRyaWJ1dGUiLCJjb250YWN0RXJyb3JNZXNzYWdlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiZGF0YXNldCIsImhhbmRsZXIiLCJoYW5kbGVGb3JtU3VibWl0IiwidHlwZSIsInRoZW4iLCJyZXMiLCJkYXRhIiwic3RhdHVzIiwic2hvdyIsInRyaWdnZXIiLCJ0ZXh0Q29udGVudCIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJlcnJvciIsImlucHV0TmFtZSIsImNhdGNoIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6IkFBQUEsYUF5RkEsU0FBQUEsU0FDQSxJQUFBQyxFQUFBQyxVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFBLGtCQUNBRyxFQUFBSCxVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFBLElBRUFJLEVBQUFDLFNBQUFDLGNBQUEsV0FDQUMsRUFBQUYsU0FBQUcsY0FBQSxPQUNBQyxFQUFBSixTQUFBSyxlQUFBWCxHQUNBWSxFQUFBTixTQUFBTSxLQW9CQSxPQWxCQVAsR0FBQU8sRUFBQUMsWUFBQVIsR0FFQUcsRUFBQU0sVUFBQUMsSUFBQSxVQUNBUCxFQUFBUSxpQkFBQSxRQUFBLFNBQUFDLEdBQ0EsT0FBQUEsRUFBQUMsT0FBQUMsTUFBQUMsUUFBQSxJQUVBWixFQUFBYSxZQUFBWCxHQUVBWSxXQUFBLFdBQ0FkLEVBQUFXLE1BQUFDLFFBQUEsRUFDQVosRUFBQVcsTUFBQUksVUFBQSxpQkFDQSxLQUVBRCxXQUFBLFdB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c3RyaWN0JztcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXG4gIHZhciBnZXRVcmxQYXJhbWV0ZXIgPSBmdW5jdGlvbiBnZXRVcmxQYXJhbWV0ZXIoc1BhcmFtKSB7XG4gICAgdmFyIHNQYWdlVVJMID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSksXG4gICAgICAgIHNVUkxWYXJpYWJsZXMgPSBzUGFnZVVSTC5zcGxpdCgnJicpLFxuICAgICAgICBzUGFyYW1ldGVyTmFtZSxcbiAgICAgICAgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBzVVJMVmFyaWFibGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzUGFyYW1ldGVyTmFtZSA9IHNVUkxWYXJpYWJsZXNbaV0uc3BsaXQoJz0nKTtcblxuICAgICAgaWYgKHNQYXJhbWV0ZXJOYW1lWzBdID09PSBzUGFyYW0pIHtcbiAgICAgICAgcmV0dXJuIHNQYXJhbWV0ZXJOYW1lWzFdID09PSB1bmRlZmluZWQgPyB0cnVlIDogZGVjb2RlVVJJQ29tcG9uZW50KHNQYXJhbWV0ZXJOYW1lWzFdKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIGt3ID0gZ2V0VXJsUGFyYW1ldGVyKCdrdycpO1xuICB2YXIgbG9jYXRpb24gPSBnZXRVcmxQYXJhbWV0ZXIoJ2xvY2F0aW9uJyk7XG5cbiAgJCgnLmt3JykuYXBwZW5kKGt3KTtcbiAgJCgnLmxvY2F0aW9uJykuYXBwZW5kKGxvY2F0aW9uKTtcblxuICBcInVzZSBzdHJpY3RcIjtcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAvKlx0VmlkZW8gQmFja2dyb3VuZFxuICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAkKCcudmlkZW8tcGxheScpLnZpZGUoXCIvc3RhdGljLzcvaW1hZ2VzL3ZpZGVvL3ZpZGVvXCIsIHtcbiAgICBwb3N0ZXJUeXBlOiBcImpwZ1wiLFxuICAgIGNsYXNzTmFtZTogJ3ZpZGVvLWNvbnRhaW5lcidcbiAgfSk7XG59KTtcblxuLy8gQ2xpZW50cyBzZWN0aW9uXG4kKCcuY2xpZW50c19fY29udGFpbmVyJykub3dsQ2Fyb3VzZWwoe1xuICBsb29wOiB0cnVlLFxuICBkb3RzOiBmYWxzZSxcbiAgbmF2OiB0cnVlLFxuICBuYXZUZXh0OiBbXCJcIiwgXCJcIl0sXG4gIGF1dG9wbGF5OiB0cnVlLFxuICBhdXRvcGxheVRpbWVvdXQ6IDMwMDAsXG4gIGF1dG9wbGF5SG92ZXJQYXVzZTogdHJ1ZSxcbiAgbWFyZ2luOiAxMCxcbiAgcmVzcG9uc2l2ZToge1xuICAgIDA6IHtcbiAgICAgIGl0ZW1zOiAxXG4gICAgfSxcbiAgICA3Njg6IHtcbiAgICAgIGl0ZW1zOiAyLFxuICAgICAgYXV0b1dpZHRoOiB0cnVlXG4gICAgfSxcbiAgICAxMDIwOiB7XG4gICAgICBpdGVtczogMyxcbiAgICAgIGF1dG9XaWR0aDogdHJ1ZVxuICAgIH0sXG4gICAgMTI4MDoge1xuICAgICAgaXRlbXM6IDRcbiAgICB9XG4gIH1cbn0pO1xuXG4vLyBBd2FyZHMgc2VjdGlvblxuJCgnLmFib3V0X19hd2FyZHMnKS5vd2xDYXJvdXNlbCh7XG4gIGxvb3A6IHRydWUsXG4gIGRvdHM6IGZhbHNlLFxuICBhdXRvcGxheTogdHJ1ZSxcbiAgYXV0b3BsYXlUaW1lb3V0OiAzMDAwLFxuICBhdXRvcGxheUhvdmVyUGF1c2U6IHRydWUsXG4gIG5hdjogdHJ1ZSxcbiAgbmF2VGV4dDogW1wiXCIsIFwiXCJdLFxuICByZXNwb25zaXZlOiB7XG4gICAgMDoge1xuICAgICAgaXRlbXM6IDFcbiAgICB9LFxuICAgIDc2ODoge1xuICAgICAgaXRlbXM6IDNcbiAgICB9LFxuICAgIDEyNTA6IHtcbiAgICAgIGl0ZW1zOiA0XG4gICAgfVxuICB9XG59KTtcblxuQU9TLmluaXQoKTtcblxuZnVuY3Rpb24gTm90aWZ5KCkge1xuICB2YXIgbWVzc2FnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ0RlZmF1bHQgbWVzc2FnZSc7XG4gIHZhciBkZWxheSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMzAwMDtcblxuICB2YXIgZXhpc3RpbmdOb3RpZnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm90aWZ5Jyk7XG4gIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHZhciB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG1lc3NhZ2UpO1xuICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cbiAgaWYgKGV4aXN0aW5nTm90aWZ5KSBib2R5LnJlbW92ZUNoaWxkKGV4aXN0aW5nTm90aWZ5KTtcblxuICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ25vdGlmeScpO1xuICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICByZXR1cm4gZS50YXJnZXQuc3R5bGUub3BhY2l0eSA9IDA7XG4gIH0pO1xuICB3cmFwcGVyLmFwcGVuZENoaWxkKHRleHROb2RlKTtcblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICB3cmFwcGVyLnN0eWxlLm9wYWNpdHkgPSAxO1xuICAgIHdyYXBwZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCknO1xuICB9LCAzMDApO1xuXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIHdyYXBwZXIuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgd3JhcHBlci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgyMDAlKSc7XG4gIH0sIGRlbGF5KTtcblxuICByZXR1cm4gYm9keS5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcbn1cblxudmFyIG5ld3NsZXR0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3c2xldHRlcicpO1xudmFyIG5ld3NsZXR0ZXJPayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cC1vaycpO1xudmFyIGRvY0hlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5vZmZzZXRIZWlnaHQ7XG52YXIgdHJpZ2dlckhlaWdodCA9IGRvY0hlaWdodCAqIDAuNzUgLSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG52YXIgbmV3c0xldHRlcktleSA9ICdpc05ld3NsZXR0ZXInO1xudmFyIHR3b1dlZWtzID0gNyAqIDI0ICogNjAgKiA2MCAqIDEwMDAgKiAyO1xudmFyIGRhdGVOb3cgPSBEYXRlLm5vdygpO1xudmFyIG5ld3NMZXR0ZXJTaG93biA9IHtcbiAgZGF0ZTogZGF0ZU5vdyArIHR3b1dlZWtzLFxuICBzaG93bjogdHJ1ZVxufTtcblxuZnVuY3Rpb24gc2hvd05ld3NsZXR0ZXJQb3B1cCgpIHtcbiAgdmFyIGlzTmV3c0xldHRlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0obmV3c0xldHRlcktleSkpO1xuICBpZiAoIWlzTmV3c0xldHRlciB8fCBpc05ld3NMZXR0ZXIuZGF0ZSA8IGRhdGVOb3cpIHtcbiAgICByZXR1cm4gbmV3c2xldHRlciAmJiBuZXdzbGV0dGVyLmNsYXNzTGlzdC5hZGQoJ25ld3NsZXR0ZXItLXNob3cnKTtcbiAgfVxufVxuXG5uZXdzbGV0dGVyT2sgJiYgW10uZm9yRWFjaC5jYWxsKG5ld3NsZXR0ZXJPaywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBuZXdzbGV0dGVyLmNsYXNzTGlzdC5yZW1vdmUoJ25ld3NsZXR0ZXItLXNob3cnKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShuZXdzTGV0dGVyS2V5LCBKU09OLnN0cmluZ2lmeShuZXdzTGV0dGVyU2hvd24pKTtcbiAgfSk7XG59KTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNjcm9sbEhlaWdodCA9IHdpbmRvdy5zY3JvbGxZO1xuICBzY3JvbGxIZWlnaHQgPiB0cmlnZ2VySGVpZ2h0ID8gc2hvd05ld3NsZXR0ZXJQb3B1cCgpIDogJyc7XG59KTtcblxuJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ2FbaHJlZl49XCIjXCJdJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgIHNjcm9sbFRvcDogJCgkLmF0dHIodGhpcywgJ2hyZWYnKSkub2Zmc2V0KCkudG9wXG4gIH0sIDUwMCk7XG59KTtcblxuaWYgKCQoJy5mb290ZXJfX3llYXInKS5sZW5ndGgpIHtcbiAgdmFyIGN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuICAkKCcuZm9vdGVyX195ZWFyJykudGV4dChjdXJyZW50WWVhcik7XG59XG5cbmlmICgkKCdodG1sW2xhbmc9XCJub1wiXScpLmxlbmd0aCkge1xuICAkKCcud29ya19fY3RhJykuYWRkQ2xhc3MoJ3dvcmtfX2N0YS0tbm8nKTtcbiAgJCgnLndvcmtfX2N0YS10aXRsZScpLmFkZENsYXNzKCd3b3JrX19jdGEtdGl0bGUtLW5vJyk7XG4gICQoJy5jb21wZXRlbmNlX19jb250ZW50JykuYWRkQ2xhc3MoJ2NvbXBldGVuY2VfX2NvbnRlbnQtLW5vJyk7XG59XG5cbi8vIFJhbmtpbmcgd2lkZ2V0IGNhcm91c2VsIGluaXRpYWxpemF0aW9uXG52YXIgb3dsID0gJCgnI3JhbmtpbmcnKTtcbnZhciBmb3JtID0gJCgnI2Zvcm1SYW5raW5nJyk7XG5cbmZpbGxJbk93bEluaXQob3dsLCAnLnJhbmtpbmcnLCB0cnVlLCA0LCA0LCA3LCAxMCwgJzAsIDExMCwgMjUwJywgNSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgdHJ1ZSwgMjAwMCwgZmFsc2UsIDUpO1xuZmlsbEluT3dsSW5pdChmb3JtLCAnLnJhbmtpbmctZm9ybScsIGZhbHNlLCA0LCAyLCAzLCA2LCAnMjU1LCAyNTUsIDI1NScsIDEwLCB0cnVlLCBmYWxzZSwgZmFsc2UsIHRydWUsIDIwMDAsIHRydWUsIDkpO1xuXG5mdW5jdGlvbiBmaWxsSW5Pd2xJbml0KG93bCwgc2xpZGVyQ29udGFpbmVyLCBhdXRvcGxheSwgaXRlbXMsIGl0ZW1zTW9iaWxlLCBpdGVtc1RhYmxldCwgc3BlZWQsIGNvbG9yLCBtYXJnaW4sIGZvcm0sIG5hdiwgbG9vcCwgZG90LCBhdXRvcGxheVRpbWVvdXRNb2JpbGUsIGRvdE1vYmlsZSkge1xuICB2YXIgZG90cyA9IHZvaWQgMCxcbiAgICAgIHdpZHRoID0gMCxcbiAgICAgIG9wYWNpdHkgPSAxLFxuICAgICAgd2lkdGhBbmltID0gW107XG5cbiAgaWYgKG93bC5sZW5ndGggPiAwKSB7XG4gICAgb3dsLm93bENhcm91c2VsKHtcbiAgICAgIGxvb3A6IGxvb3AsXG4gICAgICBsYXp5TG9hZDogdHJ1ZSxcbiAgICAgIG1hcmdpbjogbWFyZ2luLFxuICAgICAgbmF2OiBuYXYsXG4gICAgICBpdGVtczogaXRlbXMsXG4gICAgICBkb3RzOiBkb3QsXG4gICAgICBhdXRvcGxheTogYXV0b3BsYXksXG4gICAgICBhdXRvcGxheVRpbWVvdXQ6IDcwMDAsXG4gICAgICBhdXRvcGxheVNwZWVkOiAyMDAwLFxuICAgICAgc21hcnRTcGVlZDogNjAwLFxuICAgICAgb25Jbml0aWFsaXplZDogb3dsSW5pdEZ1bmN0aW9uLFxuICAgICAgb25DaGFuZ2U6IG93bENoYW5nZWRGdW5jdGlvbixcbiAgICAgIG9uQ2hhbmdlZDogb3dsSW5pdEZ1bmN0aW9uLFxuICAgICAgcmVzcG9uc2l2ZToge1xuICAgICAgICAwOiB7XG4gICAgICAgICAgaXRlbXM6IGZvcm0gPyAyIDogMSxcbiAgICAgICAgICBtYXJnaW46IDAsXG4gICAgICAgICAgZG90czogZG90TW9iaWxlLFxuICAgICAgICAgIG5hdjogZmFsc2UsXG4gICAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgICBhdXRvcGxheTogZmFsc2UsXG4gICAgICAgICAgYXV0b3BsYXlUaW1lb3V0OiBhdXRvcGxheVRpbWVvdXRNb2JpbGVcbiAgICAgICAgfSxcbiAgICAgICAgNjAwOiB7XG4gICAgICAgICAgaXRlbXM6IGZvcm0gPyBpdGVtc1RhYmxldCA6IGl0ZW1zTW9iaWxlLFxuICAgICAgICAgIG1hcmdpbjogZm9ybSA/IDI1IDogbWFyZ2luXG4gICAgICAgIH0sXG4gICAgICAgIDEwMDA6IHtcbiAgICAgICAgICBpdGVtczogaXRlbXNUYWJsZXQsXG4gICAgICAgICAgbWFyZ2luOiBmb3JtID8gMjUgOiBtYXJnaW5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb3dsSW5pdEZ1bmN0aW9uKCkge1xuICAgIGRvdHMgPSAkKHNsaWRlckNvbnRhaW5lciArICcgLm93bC1kb3QnKTtcbiAgICBpZiAoZG90cy5sZW5ndGggJiYgIW5hdikge1xuICAgICAgc3RlcCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG93bENoYW5nZWRGdW5jdGlvbihwcm9wKSB7XG4gICAgaWYgKHByb3AucHJvcGVydHkubmFtZSA9PT0gJ3Bvc2l0aW9uJykge1xuICAgICAgd2lkdGggPSA1MDtcbiAgICB9XG4gICAgZG90cy5maW5kKCdzcGFuJykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICB3aWR0aCA9IDA7XG4gICAgb3BhY2l0eSA9IDE7XG4gIH1cblxuICBmdW5jdGlvbiBzdGVwKCkge1xuICAgIHZhciBpbmNyZW1lbnQgPSA1MCAvIChzcGVlZCAqIDYwKTtcbiAgICB2YXIgZGVjcmVtZW50ID0gMSAvIChzcGVlZCAqIDYwKTtcbiAgICB3aWR0aCArPSBpbmNyZW1lbnQ7XG4gICAgb3BhY2l0eSAtPSBkZWNyZW1lbnQ7XG4gICAgJChkb3RzW2dldFByZXZJdGVtKCldKS5maW5kKCdzcGFuJykuY3NzKHtcbiAgICAgICdib3JkZXItY29sb3InOiAncmdiYSgnICsgY29sb3IgKyAnLCAnICsgb3BhY2l0eSArICcpJ1xuICAgIH0pO1xuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA1OTkpIHtcbiAgICAgICQoZG90c1tnZXROZXh0SXRlbSgpXSkuZmluZCgnc3BhbicpLmNzcyh7XG4gICAgICAgICdib3JkZXItbGVmdCc6ICdzb2xpZCAnICsgd2lkdGggLyAyICsgJ3B4IHJnYmEoJyArIGNvbG9yICsgJywgMSknXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgJChkb3RzW2dldE5leHRJdGVtKCldKS5maW5kKCdzcGFuJykuY3NzKHtcbiAgICAgICAgJ2JvcmRlci1sZWZ0JzogJ3NvbGlkICcgKyB3aWR0aCArICdweCByZ2JhKCcgKyBjb2xvciArICcsIDEpJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHdpZHRoIDwgNTApIHtcbiAgICAgIHdpZHRoQW5pbS5wdXNoKHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc2V0U3R5bGVzKCk7XG4gICAgICBkb3RzW2dldE5leHRJdGVtKCldLmNsaWNrKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRTdHlsZXMoKSB7XG4gICAgd2lkdGggPSAwO1xuICAgIG9wYWNpdHkgPSAxO1xuICAgICQoZG90c1tnZXRQcmV2SXRlbSgpXSkuZmluZCgnc3BhbicpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgJChkb3RzW2dldE5leHRJdGVtKCldKS5maW5kKCdzcGFuJykuY3NzKHtcbiAgICAgICdib3JkZXItbGVmdCc6ICcnXG4gICAgfSk7XG4gICAgZG90cy5vbmUoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgd2lkdGhBbmltLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoaXRlbSk7XG4gICAgICB9KTtcbiAgICAgIHdpZHRoQW5pbSA9IFtdO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TmV4dEl0ZW0oKSB7XG4gICAgdmFyIG5leHRJdGVtSW5kZXggPSAwO1xuICAgICQuZWFjaChkb3RzLCBmdW5jdGlvbiAoaW5kZXgsIGl0ZW0pIHtcbiAgICAgIGlmICgkKGl0ZW0pLmhhc0NsYXNzKCdhY3RpdmUnKSAmJiBpbmRleCA8IGRvdHMubGVuZ3RoIC0gMSkge1xuICAgICAgICBuZXh0SXRlbUluZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG5leHRJdGVtSW5kZXg7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQcmV2SXRlbSgpIHtcbiAgICB2YXIgcHJldkl0ZW0gPSBkb3RzLmxlbmd0aCAtIDE7XG4gICAgJC5lYWNoKGRvdHMsIGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xuICAgICAgaWYgKCQoaXRlbSkuaGFzQ2xhc3MoJ2FjdGl2ZScpICYmIGluZGV4IDwgZG90cy5sZW5ndGggLSAxKSB7XG4gICAgICAgIHByZXZJdGVtID0gaW5kZXg7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcHJldkl0ZW07XG4gIH1cbn1cblxuJC52YWxpZGF0b3IubWV0aG9kcy5udW1iZXIgPSBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgcmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgfHwgL15bMC05K1xcLSgpIOKAlF0rJC8udGVzdCh2YWx1ZSk7XG59O1xuXG52YXIgaGlkZSA9IGZ1bmN0aW9uIGhpZGUoZWxlbSkge1xuICByZXR1cm4gZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xufTtcblxuJCgnZm9ybScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAkKHRoaXMpLnZhbGlkYXRlKHtcbiAgICBzaG93RXJyb3JzOiBmdW5jdGlvbiBzaG93RXJyb3JzKGVycm9yTWFwLCBlcnJvckxpc3QpIHtcbiAgICAgIGlmIChlcnJvck1hcFsnYXR0YWNoJ10pIE5vdGlmeSh1cGxvYWRFcnJvck1lc3NhZ2UsIG5vdGlmeURlbGF5KTtcbiAgICAgIHRoaXMuZGVmYXVsdFNob3dFcnJvcnMoKTtcbiAgICB9LFxuICAgIHJ1bGVzOiB7XG4gICAgICBuYW1lOiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBtYXhsZW5ndGg6IDI1NVxuICAgICAgfSxcbiAgICAgIGxhc3RfbmFtZToge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbWF4bGVuZ3RoOiAyNTVcbiAgICAgIH0sXG4gICAgICBwb3NpdGlvbjoge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbWF4bGVuZ3RoOiAyNTVcbiAgICAgIH0sXG4gICAgICBjb21wYW55OiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBtYXhsZW5ndGg6IDI1NVxuICAgICAgfSxcbiAgICAgIGVtYWlsOiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgbWF4bGVuZ3RoOiAyNTVcbiAgICAgIH0sXG4gICAgICBwaG9uZToge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbnVtYmVyOiB0cnVlLFxuICAgICAgICBtYXhsZW5ndGg6IDI1NSxcbiAgICAgICAgbWlubGVuZ3RoOiA1XG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBtYXhsZW5ndGg6IDY1NTM1XG4gICAgICB9XG4gICAgfSxcbiAgICBtZXNzYWdlczoge1xuICAgICAgZW1haWw6IHtcbiAgICAgICAgZW1haWw6ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLidcbiAgICAgIH1cbiAgICB9LFxuICAgIHN1Ym1pdEhhbmRsZXI6IGZ1bmN0aW9uIHN1Ym1pdEhhbmRsZXIoZm9ybSwgZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgcm93RGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKTtcbiAgICAgIHZhciB1cmwgPSBmb3JtLmdldEF0dHJpYnV0ZSgnZGF0YS11cmwnKTtcbiAgICAgIHZhciBjb250YWN0RXJyb3JNZXNzYWdlID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcucmVnaXN0cmF0aW9uX19lcnJvcicpO1xuICAgICAgdmFyIHRoeE1lc3NhZ2UgPSBmb3JtLm5leHRFbGVtZW50U2libGluZztcbiAgICAgIHJvd0RhdGEuYXBwZW5kKCdoYW5kbGVyX2lkJywgZm9ybS5kYXRhc2V0LmhhbmRsZXIpO1xuXG4gICAgICBoYW5kbGVGb3JtU3VibWl0KHVybCwgcm93RGF0YSwge1xuICAgICAgICB0eXBlOiBmb3JtLmRhdGFzZXQudHlwZVxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMpIHtcbiAgICAgICAgICAkKCcubm90aWZpY2F0aW9uJykuc2hvdygpO1xuICAgICAgICAgICQoXCJmb3JtXCIpLnRyaWdnZXIoXCJyZXNldFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb250YWN0RXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gJ0NoZWNrIHNlbGVjdGVkIGZpZWxkcywgcGxlYXNlLic7XG4gICAgICAgICAgc2hvdyhjb250YWN0RXJyb3JNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhyZXMuZGF0YSkubGVuZ3RoID4gMSkge1xuICAgICAgICAgIE9iamVjdC5rZXlzKHJlcy5kYXRhKS5tYXAoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXROYW1lID0gZXJyb3Iuc3BsaXQoJy0nKVsxXTtcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPScgKyBpbnB1dE5hbWUgKyAnXScpO1xuXG4gICAgICAgICAgICByZXR1cm4gaW5wdXQuY2xhc3NMaXN0LmFkZCgnaGFzLWVycm9yJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufSk7Il19
