"use strict";function Notify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Default message",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n=document.querySelector(".notify"),o=document.createElement("div"),a=document.createTextNode(e),r=document.body;return n&&r.removeChild(n),o.classList.add("notify"),o.addEventListener("click",function(e){return e.target.style.opacity=0}),o.appendChild(a),setTimeout(function(){o.style.opacity=1,o.style.transform="translateY(0)"},300),setTimeout(function(){o.style.opacity=0,o.style.transform="translateY(200%)"},t),r.appendChild(o)}$(document).ready(function(){$(".video-play").vide("/static/7/images/video/video",{posterType:"jpg",className:"video-container"})}),$(".clients__container").owlCarousel({loop:!0,dots:!1,nav:!0,navText:["",""],autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,margin:10,responsive:{0:{items:1},768:{items:2,autoWidth:!0},1020:{items:3,autoWidth:!0},1280:{items:4}}}),$(".about__awards").owlCarousel({loop:!0,dots:!1,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,nav:!0,navText:["",""],responsive:{0:{items:1},768:{items:3},1250:{items:4}}}),AOS.init();var newsletter=document.querySelector(".newsletter"),newsletterOk=document.querySelectorAll(".popup-ok"),docHeight=document.querySelector("body").offsetHeight,triggerHeight=.75*docHeight-window.innerHeight,newsLetterKey="isNewsletter",twoWeeks=12096e5,dateNow=Date.now(),newsLetterShown={date:dateNow+twoWeeks,shown:!0};function showNewsletterPopup(){var e=JSON.parse(localStorage.getItem(newsLetterKey));if(!e||e.date<dateNow)return newsletter&&newsletter.classList.add("newsletter--show")}if(newsletterOk&&[].forEach.call(newsletterOk,function(e){e.addEventListener("click",function(){newsletter.classList.remove("newsletter--show"),localStorage.setItem(newsLetterKey,JSON.stringify(newsLetterShown))})}),window.addEventListener("scroll",function(){window.scrollY>triggerHeight&&showNewsletterPopup()}),$(document).on("click",'a[href^="#"]',function(e){e.preventDefault(),$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top},500)}),$(".footer__year").length){var currentYear=(new Date).getFullYear();$(".footer__year").text(currentYear)}$('html[lang="no"]').length&&($(".work__cta").addClass("work__cta--no"),$(".work__cta-title").addClass("work__cta-title--no"),$(".competence__content").addClass("competence__content--no"));var owl=$("#ranking"),form=$("#formRanking");function fillInOwlInit(e,t,n,o,a,r,i,s,l,d,c,u,m,f,p){var h=void 0,g=0,w=1,y=[];function v(){(h=$(t+" .owl-dot")).length&&!c&&_()}function _(){g+=50/(60*i),w-=1/(60*i),$(h[b()]).find("span").css({"border-color":"rgba("+s+", "+w+")"}),window.innerWidth<=599?$(h[k()]).find("span").css({"border-left":"solid "+g/2+"px rgba("+s+", 1)"}):$(h[k()]).find("span").css({"border-left":"solid "+g+"px rgba("+s+", 1)"}),g<50?y.push(requestAnimationFrame(_)):(g=0,w=1,$(h[b()]).find("span").removeAttr("style"),$(h[k()]).find("span").css({"border-left":""}),h.one("click",function(){y.forEach(function(e){cancelAnimationFrame(e)}),y=[]}),h[k()].click())}function k(){var e=0;return $.each(h,function(t,n){$(n).hasClass("active")&&t<h.length-1&&(e=t+1)}),e}function b(){var e=h.length-1;return $.each(h,function(t,n){$(n).hasClass("active")&&t<h.length-1&&(e=t)}),e}e.length>0&&e.owlCarousel({loop:u,lazyLoad:!0,margin:l,nav:c,items:o,dots:m,autoplay:n,autoplayTimeout:7e3,autoplaySpeed:2e3,smartSpeed:600,onInitialized:v,onChange:function(e){"position"===e.property.name&&(g=50);h.find("span").removeAttr("style"),g=0,w=1},onChanged:v,responsive:{0:{items:d?2:1,margin:0,dots:p,nav:!1,loop:!0,autoplay:!1,autoplayTimeout:f},600:{items:d?r:a,margin:d?25:l},1e3:{items:r,margin:d?25:l}}})}fillInOwlInit(owl,".ranking",!0,4,4,7,10,"0, 110, 250",5,!1,!1,!1,!0,2e3,!1,5),fillInOwlInit(form,".ranking-form",!1,4,2,3,6,"255, 255, 255",10,!0,!1,!1,!0,2e3,!0,9),$.validator.methods.number=function(e,t){return this.optional(t)||/^[0-9+\-() â€”]+$/.test(e)};var hide=function(e){return e.style.display="none"};$("form").each(function(){$(this).validate({showErrors:function(e,t){e.attach&&Notify(uploadErrorMessage,notifyDelay),this.defaultShowErrors()},rules:{name:{required:!0,maxlength:255},last_name:{required:!0,maxlength:255},position:{required:!0,maxlength:255},company:{required:!0,maxlength:255},email:{required:!0,email:!0,maxlength:255},phone:{required:!0,number:!0,maxlength:255,minlength:5},description:{required:!1,maxlength:65535}},messages:{email:{email:"Please enter a valid email address."}},submitHandler:function(e,t){t.preventDefault();var n=new FormData(e),o=e.getAttribute("data-url"),a=e.querySelector(".registration__error");e.nextElementSibling;n.append("handler_id",e.dataset.handler),handleFormSubmit(o,n,{type:e.dataset.type}).then(function(e){e.data.status?($(".notification").show(),$("form").trigger("reset")):(a.textContent="Check selected fields, please.",show(a)),Object.keys(e.data).length>1&&Object.keys(e.data).map(function(e){var t=e.split("-")[1];return document.querySelector("[name="+t+"]").classList.add("has-error")})}).catch(function(e){console.log(e)})}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiTm90aWZ5IiwibWVzc2FnZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImRlbGF5IiwiZXhpc3RpbmdOb3RpZnkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ3cmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsInRleHROb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJib2R5IiwicmVtb3ZlQ2hpbGQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsInN0eWxlIiwib3BhY2l0eSIsImFwcGVuZENoaWxkIiwic2V0VGltZW91dCIsInRyYW5zZm9ybSIsIiQiLCJyZWFkeSIsInZpZGUiLCJwb3N0ZXJUeXBlIiwiY2xhc3NOYW1lIiwib3dsQ2Fyb3VzZWwiLCJsb29wIiwiZG90cyIsIm5hdiIsIm5hdlRleHQiLCJhdXRvcGxheSIsImF1dG9wbGF5VGltZW91dCIsImF1dG9wbGF5SG92ZXJQYXVzZSIsIm1hcmdpbiIsInJlc3BvbnNpdmUiLCIwIiwiaXRlbXMiLCI3NjgiLCJhdXRvV2lkdGgiLCIxMDIwIiwiMTI4MCIsIjEyNTAiLCJBT1MiLCJpbml0IiwibmV3c2xldHRlciIsIm5ld3NsZXR0ZXJPayIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkb2NIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJ0cmlnZ2VySGVpZ2h0Iiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJuZXdzTGV0dGVyS2V5IiwidHdvV2Vla3MiLCJkYXRlTm93IiwiRGF0ZSIsIm5vdyIsIm5ld3NMZXR0ZXJTaG93biIsImRhdGUiLCJzaG93biIsInNob3dOZXdzbGV0dGVyUG9wdXAiLCJpc05ld3NMZXR0ZXIiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZm9yRWFjaCIsImNhbGwiLCJpdGVtIiwicmVtb3ZlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInNjcm9sbFkiLCJvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiYXR0ciIsInRoaXMiLCJvZmZzZXQiLCJ0b3AiLCJjdXJyZW50WWVhciIsImdldEZ1bGxZZWFyIiwidGV4dCIsImFkZENsYXNzIiwib3dsIiwiZm9ybSIsImZpbGxJbk93bEluaXQiLCJzbGlkZXJDb250YWluZXIiLCJpdGVtc01vYmlsZSIsIml0ZW1zVGFibGV0Iiwic3BlZWQiLCJjb2xvciIsImRvdCIsImF1dG9wbGF5VGltZW91dE1vYmlsZSIsImRvdE1vYmlsZSIsIndpZHRoIiwid2lkdGhBbmltIiwib3dsSW5pdEZ1bmN0aW9uIiwic3RlcCIsImdldFByZXZJdGVtIiwiZmluZCIsImNzcyIsImJvcmRlci1jb2xvciIsImlubmVyV2lkdGgiLCJnZXROZXh0SXRlbSIsImJvcmRlci1sZWZ0IiwicHVzaCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInJlbW92ZUF0dHIiLCJvbmUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImNsaWNrIiwibmV4dEl0ZW1JbmRleCIsImVhY2giLCJpbmRleCIsImhhc0NsYXNzIiwicHJldkl0ZW0iLCJsYXp5TG9hZCIsImF1dG9wbGF5U3BlZWQiLCJzbWFydFNwZWVkIiwib25Jbml0aWFsaXplZCIsIm9uQ2hhbmdlIiwicHJvcCIsInByb3BlcnR5IiwibmFtZSIsIm9uQ2hhbmdlZCIsIjYwMCIsIjEwMDAiLCJ2YWxpZGF0b3IiLCJtZXRob2RzIiwibnVtYmVyIiwidmFsdWUiLCJlbGVtZW50Iiwib3B0aW9uYWwiLCJ0ZXN0IiwiaGlkZSIsImVsZW0iLCJkaXNwbGF5IiwidmFsaWRhdGUiLCJzaG93RXJyb3JzIiwiZXJyb3JNYXAiLCJlcnJvckxpc3QiLCJ1cGxvYWRFcnJvck1lc3NhZ2UiLCJub3RpZnlEZWxheSIsImRlZmF1bHRTaG93RXJyb3JzIiwicnVsZXMiLCJyZXF1aXJlZCIsIm1heGxlbmd0aCIsImxhc3RfbmFtZSIsInBvc2l0aW9uIiwiY29tcGFueSIsImVtYWlsIiwicGhvbmUiLCJtaW5sZW5ndGgiLCJkZXNjcmlwdGlvbiIsIm1lc3NhZ2VzIiwic3VibWl0SGFuZGxlciIsInJvd0RhdGEiLCJGb3JtRGF0YSIsInVybCIsImdldEF0dHJpYnV0ZSIsImNvbnRhY3RFcnJvck1lc3NhZ2UiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJhcHBlbmQiLCJkYXRhc2V0IiwiaGFuZGxlciIsImhhbmRsZUZvcm1TdWJtaXQiLCJ0eXBlIiwidGhlbiIsInJlcyIsImRhdGEiLCJzdGF0dXMiLCJzaG93IiwidHJpZ2dlciIsInRleHRDb250ZW50IiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImVycm9yIiwiaW5wdXROYW1lIiwic3BsaXQiLCJjYXRjaCIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJBQUFBLGFBb0VBLFNBQUFBLFNBQ0EsSUFBQUMsRUFBQUMsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBQSxrQkFDQUcsRUFBQUgsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBQSxJQUVBSSxFQUFBQyxTQUFBQyxjQUFBLFdBQ0FDLEVBQUFGLFNBQUFHLGNBQUEsT0FDQUMsRUFBQUosU0FBQUssZUFBQVgsR0FDQVksRUFBQU4sU0FBQU0sS0FvQkEsT0FsQkFQLEdBQUFPLEVBQUFDLFlBQUFSLEdBRUFHLEVBQUFNLFVBQUFDLElBQUEsVUFDQVAsRUFBQVEsaUJBQUEsUUFBQSxTQUFBQyxHQUNBLE9BQUFBLEVBQUFDLE9BQUFDLE1BQUFDLFFBQUEsSUFFQVosRUFBQWEsWUFBQVgsR0FFQVksV0FBQSxXQUNBZCxFQUFBVyxNQUFBQyxRQUFBLEVBQ0FaLEVBQUFXLE1BQUFJLFVBQUEsaUJBQ0EsS0FFQUQsV0FBQSxXQUNBZCxFQUFBVyxNQUFBQyxRQUFBLEVBQ0FaLEVBQUFXLE1BQUFJLFVBQUEsb0JBQ0FuQixHQUVBUSxFQUFBUyxZQUFBYixHQTdGQWdCLEVBQUFsQixVQUFBbUIsTUFBQSxXQVFBRCxFQUFBLGVBQUFFLEtBQUEsZ0NBQ0FDLFdBQUEsTUFDQUMsVUFBQSxzQkFLQUosRUFBQSx1QkFBQUssYUFDQUMsTUFBQSxFQUNBQyxNQUFBLEVBQ0FDLEtBQUEsRUFDQUMsU0FBQSxHQUFBLElBQ0FDLFVBQUEsRUFDQUMsZ0JBQUEsSUFDQUMsb0JBQUEsRUFDQUMsT0FBQSxHQUNBQyxZQUNBQyxHQUNBQyxNQUFBLEdBRUFDLEtBQ0FELE1BQUEsRUFDQUUsV0FBQSxHQUVBQyxNQUNBSCxNQUFBLEVBQ0FFLFdBQUEsR0FFQUUsTUFDQUosTUFBQSxNQU1BaEIsRUFBQSxrQkFBQUssYUFDQUMsTUFBQSxFQUNBQyxNQUFBLEVBQ0FHLFVBQUEsRUFDQUMsZ0JBQUEsSUFDQUMsb0JBQUEsRUFDQUosS0FBQSxFQUNBQyxTQUFBLEdBQUEsSUFDQUssWUFDQUMsR0FDQUMsTUFBQSxHQUVBQyxLQUNBRCxNQUFBLEdBRUFLLE1BQ0FMLE1BQUEsTUFLQU0sSUFBQUMsT0FnQ0EsSUFBQUMsV0FBQTFDLFNBQUFDLGNBQUEsZUFDQTBDLGFBQUEzQyxTQUFBNEMsaUJBQUEsYUFDQUMsVUFBQTdDLFNBQUFDLGNBQUEsUUFBQTZDLGFBQ0FDLGNBQUEsSUFBQUYsVUFBQUcsT0FBQUMsWUFDQUMsY0FBQSxlQUNBQyxTQUFBLFFBQ0FDLFFBQUFDLEtBQUFDLE1BQ0FDLGlCQUNBQyxLQUFBSixRQUFBRCxTQUNBTSxPQUFBLEdBR0EsU0FBQUMsc0JBQ0EsSUFBQUMsRUFBQUMsS0FBQUMsTUFBQUMsYUFBQUMsUUFBQWIsZ0JBQ0EsSUFBQVMsR0FBQUEsRUFBQUgsS0FBQUosUUFDQSxPQUFBVixZQUFBQSxXQUFBbEMsVUFBQUMsSUFBQSxvQkF3QkEsR0FwQkFrQyxpQkFBQXFCLFFBQUFDLEtBQUF0QixhQUFBLFNBQUF1QixHQUNBQSxFQUFBeEQsaUJBQUEsUUFBQSxXQUNBZ0MsV0FBQWxDLFVBQUEyRCxPQUFBLG9CQUNBTCxhQUFBTSxRQUFBbEIsY0FBQVUsS0FBQVMsVUFBQWQsc0JBSUFQLE9BQUF0QyxpQkFBQSxTQUFBLFdBQ0FzQyxPQUFBc0IsUUFDQXZCLGVBQUFXLHdCQUdBeEMsRUFBQWxCLFVBQUF1RSxHQUFBLFFBQUEsZUFBQSxTQUFBQyxHQUNBQSxFQUFBQyxpQkFFQXZELEVBQUEsY0FBQXdELFNBQ0FDLFVBQUF6RCxFQUFBQSxFQUFBMEQsS0FBQUMsS0FBQSxTQUFBQyxTQUFBQyxLQUNBLE9BR0E3RCxFQUFBLGlCQUFBdEIsT0FBQSxDQUNBLElBQUFvRixhQUFBLElBQUEzQixNQUFBNEIsY0FDQS9ELEVBQUEsaUJBQUFnRSxLQUFBRixhQUdBOUQsRUFBQSxtQkFBQXRCLFNBQ0FzQixFQUFBLGNBQUFpRSxTQUFBLGlCQUNBakUsRUFBQSxvQkFBQWlFLFNBQUEsdUJBQ0FqRSxFQUFBLHdCQUFBaUUsU0FBQSw0QkFJQSxJQUFBQyxJQUFBbEUsRUFBQSxZQUNBbUUsS0FBQW5FLEVBQUEsZ0JBS0EsU0FBQW9FLGNBQUFGLEVBQUFHLEVBQUEzRCxFQUFBTSxFQUFBc0QsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQTVELEVBQUFzRCxFQUFBM0QsRUFBQUYsRUFBQW9FLEVBQUFDLEVBQUFDLEdBQ0EsSUFBQXJFLE9BQUEsRUFDQXNFLEVBQUEsRUFDQWpGLEVBQUEsRUFDQWtGLEtBdUNBLFNBQUFDLEtBQ0F4RSxFQUFBUCxFQUFBcUUsRUFBQSxjQUNBM0YsU0FBQThCLEdBQ0F3RSxJQWFBLFNBQUFBLElBR0FILEdBRkEsSUFBQSxHQUFBTCxHQUdBNUUsR0FGQSxHQUFBLEdBQUE0RSxHQUdBeEUsRUFBQU8sRUFBQTBFLE1BQUFDLEtBQUEsUUFBQUMsS0FDQUMsZUFBQSxRQUFBWCxFQUFBLEtBQUE3RSxFQUFBLE1BRUFrQyxPQUFBdUQsWUFBQSxJQUNBckYsRUFBQU8sRUFBQStFLE1BQUFKLEtBQUEsUUFBQUMsS0FDQUksY0FBQSxTQUFBVixFQUFBLEVBQUEsV0FBQUosRUFBQSxTQUdBekUsRUFBQU8sRUFBQStFLE1BQUFKLEtBQUEsUUFBQUMsS0FDQUksY0FBQSxTQUFBVixFQUFBLFdBQUFKLEVBQUEsU0FJQUksRUFBQSxHQUNBQyxFQUFBVSxLQUFBQyxzQkFBQVQsS0FRQUgsRUFBQSxFQUNBakYsRUFBQSxFQUNBSSxFQUFBTyxFQUFBMEUsTUFBQUMsS0FBQSxRQUFBUSxXQUFBLFNBQ0ExRixFQUFBTyxFQUFBK0UsTUFBQUosS0FBQSxRQUFBQyxLQUNBSSxjQUFBLEtBRUFoRixFQUFBb0YsSUFBQSxRQUFBLFdBQ0FiLEVBQUFoQyxRQUFBLFNBQUFFLEdBQ0E0QyxxQkFBQTVDLEtBRUE4QixPQWZBdkUsRUFBQStFLEtBQUFPLFNBbUJBLFNBQUFQLElBQ0EsSUFBQVEsRUFBQSxFQU9BLE9BTkE5RixFQUFBK0YsS0FBQXhGLEVBQUEsU0FBQXlGLEVBQUFoRCxHQUNBaEQsRUFBQWdELEdBQUFpRCxTQUFBLFdBQUFELEVBQUF6RixFQUFBN0IsT0FBQSxJQUNBb0gsRUFBQUUsRUFBQSxLQUlBRixFQUdBLFNBQUFiLElBQ0EsSUFBQWlCLEVBQUEzRixFQUFBN0IsT0FBQSxFQU9BLE9BTkFzQixFQUFBK0YsS0FBQXhGLEVBQUEsU0FBQXlGLEVBQUFoRCxHQUNBaEQsRUFBQWdELEdBQUFpRCxTQUFBLFdBQUFELEVBQUF6RixFQUFBN0IsT0FBQSxJQUNBd0gsRUFBQUYsS0FJQUUsRUFqSEFoQyxFQUFBeEYsT0FBQSxHQUNBd0YsRUFBQTdELGFBQ0FDLEtBQUFBLEVBQ0E2RixVQUFBLEVBQ0F0RixPQUFBQSxFQUNBTCxJQUFBQSxFQUNBUSxNQUFBQSxFQUNBVCxLQUFBbUUsRUFDQWhFLFNBQUFBLEVBQ0FDLGdCQUFBLElBQ0F5RixjQUFBLElBQ0FDLFdBQUEsSUFDQUMsY0FBQXZCLEVBQ0F3QixTQStCQSxTQUFBQyxHQUNBLGFBQUFBLEVBQUFDLFNBQUFDLE9BQ0E3QixFQUFBLElBRUF0RSxFQUFBMkUsS0FBQSxRQUFBUSxXQUFBLFNBQ0FiLEVBQUEsRUFDQWpGLEVBQUEsR0FwQ0ErRyxVQUFBNUIsRUFDQWpFLFlBQ0FDLEdBQ0FDLE1BQUFtRCxFQUFBLEVBQUEsRUFDQXRELE9BQUEsRUFDQU4sS0FBQXFFLEVBQ0FwRSxLQUFBLEVBQ0FGLE1BQUEsRUFDQUksVUFBQSxFQUNBQyxnQkFBQWdFLEdBRUFpQyxLQUNBNUYsTUFBQW1ELEVBQUFJLEVBQUFELEVBQ0F6RCxPQUFBc0QsRUFBQSxHQUFBdEQsR0FFQWdHLEtBQ0E3RixNQUFBdUQsRUFDQTFELE9BQUFzRCxFQUFBLEdBQUF0RCxNQXhDQXVELGNBQUFGLElBQUEsWUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsY0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLEdBQ0FFLGNBQUFELEtBQUEsaUJBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLGdCQUFBLElBQUEsR0FBQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsR0E2SEFuRSxFQUFBOEcsVUFBQUMsUUFBQUMsT0FBQSxTQUFBQyxFQUFBQyxHQUNBLE9BQUF2RCxLQUFBd0QsU0FBQUQsSUFBQSxrQkFBQUUsS0FBQUgsSUFHQSxJQUFBSSxLQUFBLFNBQUFDLEdBQ0EsT0FBQUEsRUFBQTNILE1BQUE0SCxRQUFBLFFBR0F2SCxFQUFBLFFBQUErRixLQUFBLFdBQ0EvRixFQUFBMkQsTUFBQTZELFVBQ0FDLFdBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFBQSxRQUFBbkosT0FBQXFKLG1CQUFBQyxhQUNBbEUsS0FBQW1FLHFCQUVBQyxPQUNBckIsTUFDQXNCLFVBQUEsRUFDQUMsVUFBQSxLQUVBQyxXQUNBRixVQUFBLEVBQ0FDLFVBQUEsS0FFQUUsVUFDQUgsVUFBQSxFQUNBQyxVQUFBLEtBRUFHLFNBQ0FKLFVBQUEsRUFDQUMsVUFBQSxLQUVBSSxPQUNBTCxVQUFBLEVBQ0FLLE9BQUEsRUFDQUosVUFBQSxLQUVBSyxPQUNBTixVQUFBLEVBQ0FoQixRQUFBLEVBQ0FpQixVQUFBLElBQ0FNLFVBQUEsR0FFQUMsYUFDQVIsVUFBQSxFQUNBQyxVQUFBLFFBR0FRLFVBQ0FKLE9BQ0FBLE1BQUEsd0NBR0FLLGNBQUEsU0FBQXZFLEVBQUFiLEdBQ0FBLEVBQUFDLGlCQUNBLElBQUFvRixFQUFBLElBQUFDLFNBQUF6RSxHQUNBMEUsRUFBQTFFLEVBQUEyRSxhQUFBLFlBQ0FDLEVBQUE1RSxFQUFBcEYsY0FBQSx3QkFDQW9GLEVBQUE2RSxtQkFDQUwsRUFBQU0sT0FBQSxhQUFBOUUsRUFBQStFLFFBQUFDLFNBRUFDLGlCQUFBUCxFQUFBRixHQUNBVSxLQUFBbEYsRUFBQStFLFFBQUFHLE9BQ0FDLEtBQUEsU0FBQUMsR0FDQUEsRUFBQUMsS0FBQUMsUUFDQXpKLEVBQUEsaUJBQUEwSixPQUNBMUosRUFBQSxRQUFBMkosUUFBQSxXQUVBWixFQUFBYSxZQUFBLGlDQUNBRixLQUFBWCxJQUdBYyxPQUFBQyxLQUFBUCxFQUFBQyxNQUFBOUssT0FBQSxHQUNBbUwsT0FBQUMsS0FBQVAsRUFBQUMsTUFBQU8sSUFBQSxTQUFBQyxHQUNBLElBQUFDLEVBQUFELEVBQUFFLE1BQUEsS0FBQSxHQUdBLE9BRkFwTCxTQUFBQyxjQUFBLFNBQUFrTCxFQUFBLEtBRUEzSyxVQUFBQyxJQUFBLGlCQUdBNEssTUFBQSxTQUFBSCxHQUNBSSxRQUFBQyxJQUFBTCIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblxuICBcInVzZSBzdHJpY3RcIjtcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAvKlx0VmlkZW8gQmFja2dyb3VuZFxuICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAkKCcudmlkZW8tcGxheScpLnZpZGUoXCIvc3RhdGljLzcvaW1hZ2VzL3ZpZGVvL3ZpZGVvXCIsIHtcbiAgICBwb3N0ZXJUeXBlOiBcImpwZ1wiLFxuICAgIGNsYXNzTmFtZTogJ3ZpZGVvLWNvbnRhaW5lcidcbiAgfSk7XG59KTtcblxuLy8gQ2xpZW50cyBzZWN0aW9uXG4kKCcuY2xpZW50c19fY29udGFpbmVyJykub3dsQ2Fyb3VzZWwoe1xuICBsb29wOiB0cnVlLFxuICBkb3RzOiBmYWxzZSxcbiAgbmF2OiB0cnVlLFxuICBuYXZUZXh0OiBbXCJcIiwgXCJcIl0sXG4gIGF1dG9wbGF5OiB0cnVlLFxuICBhdXRvcGxheVRpbWVvdXQ6IDMwMDAsXG4gIGF1dG9wbGF5SG92ZXJQYXVzZTogdHJ1ZSxcbiAgbWFyZ2luOiAxMCxcbiAgcmVzcG9uc2l2ZToge1xuICAgIDA6IHtcbiAgICAgIGl0ZW1zOiAxXG4gICAgfSxcbiAgICA3Njg6IHtcbiAgICAgIGl0ZW1zOiAyLFxuICAgICAgYXV0b1dpZHRoOiB0cnVlXG4gICAgfSxcbiAgICAxMDIwOiB7XG4gICAgICBpdGVtczogMyxcbiAgICAgIGF1dG9XaWR0aDogdHJ1ZVxuICAgIH0sXG4gICAgMTI4MDoge1xuICAgICAgaXRlbXM6IDRcbiAgICB9XG4gIH1cbn0pO1xuXG4vLyBBd2FyZHMgc2VjdGlvblxuJCgnLmFib3V0X19hd2FyZHMnKS5vd2xDYXJvdXNlbCh7XG4gIGxvb3A6IHRydWUsXG4gIGRvdHM6IGZhbHNlLFxuICBhdXRvcGxheTogdHJ1ZSxcbiAgYXV0b3BsYXlUaW1lb3V0OiAzMDAwLFxuICBhdXRvcGxheUhvdmVyUGF1c2U6IHRydWUsXG4gIG5hdjogdHJ1ZSxcbiAgbmF2VGV4dDogW1wiXCIsIFwiXCJdLFxuICByZXNwb25zaXZlOiB7XG4gICAgMDoge1xuICAgICAgaXRlbXM6IDFcbiAgICB9LFxuICAgIDc2ODoge1xuICAgICAgaXRlbXM6IDNcbiAgICB9LFxuICAgIDEyNTA6IHtcbiAgICAgIGl0ZW1zOiA0XG4gICAgfVxuICB9XG59KTtcblxuQU9TLmluaXQoKTtcblxuZnVuY3Rpb24gTm90aWZ5KCkge1xuICB2YXIgbWVzc2FnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ0RlZmF1bHQgbWVzc2FnZSc7XG4gIHZhciBkZWxheSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMzAwMDtcblxuICB2YXIgZXhpc3RpbmdOb3RpZnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm90aWZ5Jyk7XG4gIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHZhciB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG1lc3NhZ2UpO1xuICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cbiAgaWYgKGV4aXN0aW5nTm90aWZ5KSBib2R5LnJlbW92ZUNoaWxkKGV4aXN0aW5nTm90aWZ5KTtcblxuICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ25vdGlmeScpO1xuICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICByZXR1cm4gZS50YXJnZXQuc3R5bGUub3BhY2l0eSA9IDA7XG4gIH0pO1xuICB3cmFwcGVyLmFwcGVuZENoaWxkKHRleHROb2RlKTtcblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICB3cmFwcGVyLnN0eWxlLm9wYWNpdHkgPSAxO1xuICAgIHdyYXBwZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCknO1xuICB9LCAzMDApO1xuXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIHdyYXBwZXIuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgd3JhcHBlci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgyMDAlKSc7XG4gIH0sIGRlbGF5KTtcblxuICByZXR1cm4gYm9keS5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcbn1cblxudmFyIG5ld3NsZXR0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3c2xldHRlcicpO1xudmFyIG5ld3NsZXR0ZXJPayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cC1vaycpO1xudmFyIGRvY0hlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5vZmZzZXRIZWlnaHQ7XG52YXIgdHJpZ2dlckhlaWdodCA9IGRvY0hlaWdodCAqIDAuNzUgLSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG52YXIgbmV3c0xldHRlcktleSA9ICdpc05ld3NsZXR0ZXInO1xudmFyIHR3b1dlZWtzID0gNyAqIDI0ICogNjAgKiA2MCAqIDEwMDAgKiAyO1xudmFyIGRhdGVOb3cgPSBEYXRlLm5vdygpO1xudmFyIG5ld3NMZXR0ZXJTaG93biA9IHtcbiAgZGF0ZTogZGF0ZU5vdyArIHR3b1dlZWtzLFxuICBzaG93bjogdHJ1ZVxufTtcblxuZnVuY3Rpb24gc2hvd05ld3NsZXR0ZXJQb3B1cCgpIHtcbiAgdmFyIGlzTmV3c0xldHRlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0obmV3c0xldHRlcktleSkpO1xuICBpZiAoIWlzTmV3c0xldHRlciB8fCBpc05ld3NMZXR0ZXIuZGF0ZSA8IGRhdGVOb3cpIHtcbiAgICByZXR1cm4gbmV3c2xldHRlciAmJiBuZXdzbGV0dGVyLmNsYXNzTGlzdC5hZGQoJ25ld3NsZXR0ZXItLXNob3cnKTtcbiAgfVxufVxuXG5uZXdzbGV0dGVyT2sgJiYgW10uZm9yRWFjaC5jYWxsKG5ld3NsZXR0ZXJPaywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBuZXdzbGV0dGVyLmNsYXNzTGlzdC5yZW1vdmUoJ25ld3NsZXR0ZXItLXNob3cnKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShuZXdzTGV0dGVyS2V5LCBKU09OLnN0cmluZ2lmeShuZXdzTGV0dGVyU2hvd24pKTtcbiAgfSk7XG59KTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNjcm9sbEhlaWdodCA9IHdpbmRvdy5zY3JvbGxZO1xuICBzY3JvbGxIZWlnaHQgPiB0cmlnZ2VySGVpZ2h0ID8gc2hvd05ld3NsZXR0ZXJQb3B1cCgpIDogJyc7XG59KTtcblxuJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ2FbaHJlZl49XCIjXCJdJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgIHNjcm9sbFRvcDogJCgkLmF0dHIodGhpcywgJ2hyZWYnKSkub2Zmc2V0KCkudG9wXG4gIH0sIDUwMCk7XG59KTtcblxuaWYgKCQoJy5mb290ZXJfX3llYXInKS5sZW5ndGgpIHtcbiAgdmFyIGN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuICAkKCcuZm9vdGVyX195ZWFyJykudGV4dChjdXJyZW50WWVhcik7XG59XG5cbmlmICgkKCdodG1sW2xhbmc9XCJub1wiXScpLmxlbmd0aCkge1xuICAkKCcud29ya19fY3RhJykuYWRkQ2xhc3MoJ3dvcmtfX2N0YS0tbm8nKTtcbiAgJCgnLndvcmtfX2N0YS10aXRsZScpLmFkZENsYXNzKCd3b3JrX19jdGEtdGl0bGUtLW5vJyk7XG4gICQoJy5jb21wZXRlbmNlX19jb250ZW50JykuYWRkQ2xhc3MoJ2NvbXBldGVuY2VfX2NvbnRlbnQtLW5vJyk7XG59XG5cbi8vIFJhbmtpbmcgd2lkZ2V0IGNhcm91c2VsIGluaXRpYWxpemF0aW9uXG52YXIgb3dsID0gJCgnI3JhbmtpbmcnKTtcbnZhciBmb3JtID0gJCgnI2Zvcm1SYW5raW5nJyk7XG5cbmZpbGxJbk93bEluaXQob3dsLCAnLnJhbmtpbmcnLCB0cnVlLCA0LCA0LCA3LCAxMCwgJzAsIDExMCwgMjUwJywgNSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgdHJ1ZSwgMjAwMCwgZmFsc2UsIDUpO1xuZmlsbEluT3dsSW5pdChmb3JtLCAnLnJhbmtpbmctZm9ybScsIGZhbHNlLCA0LCAyLCAzLCA2LCAnMjU1LCAyNTUsIDI1NScsIDEwLCB0cnVlLCBmYWxzZSwgZmFsc2UsIHRydWUsIDIwMDAsIHRydWUsIDkpO1xuXG5mdW5jdGlvbiBmaWxsSW5Pd2xJbml0KG93bCwgc2xpZGVyQ29udGFpbmVyLCBhdXRvcGxheSwgaXRlbXMsIGl0ZW1zTW9iaWxlLCBpdGVtc1RhYmxldCwgc3BlZWQsIGNvbG9yLCBtYXJnaW4sIGZvcm0sIG5hdiwgbG9vcCwgZG90LCBhdXRvcGxheVRpbWVvdXRNb2JpbGUsIGRvdE1vYmlsZSkge1xuICB2YXIgZG90cyA9IHZvaWQgMCxcbiAgICAgIHdpZHRoID0gMCxcbiAgICAgIG9wYWNpdHkgPSAxLFxuICAgICAgd2lkdGhBbmltID0gW107XG5cbiAgaWYgKG93bC5sZW5ndGggPiAwKSB7XG4gICAgb3dsLm93bENhcm91c2VsKHtcbiAgICAgIGxvb3A6IGxvb3AsXG4gICAgICBsYXp5TG9hZDogdHJ1ZSxcbiAgICAgIG1hcmdpbjogbWFyZ2luLFxuICAgICAgbmF2OiBuYXYsXG4gICAgICBpdGVtczogaXRlbXMsXG4gICAgICBkb3RzOiBkb3QsXG4gICAgICBhdXRvcGxheTogYXV0b3BsYXksXG4gICAgICBhdXRvcGxheVRpbWVvdXQ6IDcwMDAsXG4gICAgICBhdXRvcGxheVNwZWVkOiAyMDAwLFxuICAgICAgc21hcnRTcGVlZDogNjAwLFxuICAgICAgb25Jbml0aWFsaXplZDogb3dsSW5pdEZ1bmN0aW9uLFxuICAgICAgb25DaGFuZ2U6IG93bENoYW5nZWRGdW5jdGlvbixcbiAgICAgIG9uQ2hhbmdlZDogb3dsSW5pdEZ1bmN0aW9uLFxuICAgICAgcmVzcG9uc2l2ZToge1xuICAgICAgICAwOiB7XG4gICAgICAgICAgaXRlbXM6IGZvcm0gPyAyIDogMSxcbiAgICAgICAgICBtYXJnaW46IDAsXG4gICAgICAgICAgZG90czogZG90TW9iaWxlLFxuICAgICAgICAgIG5hdjogZmFsc2UsXG4gICAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgICBhdXRvcGxheTogZmFsc2UsXG4gICAgICAgICAgYXV0b3BsYXlUaW1lb3V0OiBhdXRvcGxheVRpbWVvdXRNb2JpbGVcbiAgICAgICAgfSxcbiAgICAgICAgNjAwOiB7XG4gICAgICAgICAgaXRlbXM6IGZvcm0gPyBpdGVtc1RhYmxldCA6IGl0ZW1zTW9iaWxlLFxuICAgICAgICAgIG1hcmdpbjogZm9ybSA/IDI1IDogbWFyZ2luXG4gICAgICAgIH0sXG4gICAgICAgIDEwMDA6IHtcbiAgICAgICAgICBpdGVtczogaXRlbXNUYWJsZXQsXG4gICAgICAgICAgbWFyZ2luOiBmb3JtID8gMjUgOiBtYXJnaW5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb3dsSW5pdEZ1bmN0aW9uKCkge1xuICAgIGRvdHMgPSAkKHNsaWRlckNvbnRhaW5lciArIFwiIC5vd2wtZG90XCIpO1xuICAgIGlmIChkb3RzLmxlbmd0aCAmJiAhbmF2KSB7XG4gICAgICBzdGVwKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb3dsQ2hhbmdlZEZ1bmN0aW9uKHByb3ApIHtcbiAgICBpZiAocHJvcC5wcm9wZXJ0eS5uYW1lID09PSAncG9zaXRpb24nKSB7XG4gICAgICB3aWR0aCA9IDUwO1xuICAgIH1cbiAgICBkb3RzLmZpbmQoJ3NwYW4nKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgIHdpZHRoID0gMDtcbiAgICBvcGFjaXR5ID0gMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0ZXAoKSB7XG4gICAgdmFyIGluY3JlbWVudCA9IDUwIC8gKHNwZWVkICogNjApO1xuICAgIHZhciBkZWNyZW1lbnQgPSAxIC8gKHNwZWVkICogNjApO1xuICAgIHdpZHRoICs9IGluY3JlbWVudDtcbiAgICBvcGFjaXR5IC09IGRlY3JlbWVudDtcbiAgICAkKGRvdHNbZ2V0UHJldkl0ZW0oKV0pLmZpbmQoJ3NwYW4nKS5jc3Moe1xuICAgICAgJ2JvcmRlci1jb2xvcic6IFwicmdiYShcIiArIGNvbG9yICsgXCIsIFwiICsgb3BhY2l0eSArIFwiKVwiXG4gICAgfSk7XG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDU5OSkge1xuICAgICAgJChkb3RzW2dldE5leHRJdGVtKCldKS5maW5kKCdzcGFuJykuY3NzKHtcbiAgICAgICAgJ2JvcmRlci1sZWZ0JzogXCJzb2xpZCBcIiArIHdpZHRoIC8gMiArIFwicHggcmdiYShcIiArIGNvbG9yICsgXCIsIDEpXCJcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKGRvdHNbZ2V0TmV4dEl0ZW0oKV0pLmZpbmQoJ3NwYW4nKS5jc3Moe1xuICAgICAgICAnYm9yZGVyLWxlZnQnOiBcInNvbGlkIFwiICsgd2lkdGggKyBcInB4IHJnYmEoXCIgKyBjb2xvciArIFwiLCAxKVwiXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAod2lkdGggPCA1MCkge1xuICAgICAgd2lkdGhBbmltLnB1c2gocmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzZXRTdHlsZXMoKTtcbiAgICAgIGRvdHNbZ2V0TmV4dEl0ZW0oKV0uY2xpY2soKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFN0eWxlcygpIHtcbiAgICB3aWR0aCA9IDA7XG4gICAgb3BhY2l0eSA9IDE7XG4gICAgJChkb3RzW2dldFByZXZJdGVtKCldKS5maW5kKCdzcGFuJykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAkKGRvdHNbZ2V0TmV4dEl0ZW0oKV0pLmZpbmQoJ3NwYW4nKS5jc3Moe1xuICAgICAgJ2JvcmRlci1sZWZ0JzogJydcbiAgICB9KTtcbiAgICBkb3RzLm9uZSgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICB3aWR0aEFuaW0uZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShpdGVtKTtcbiAgICAgIH0pO1xuICAgICAgd2lkdGhBbmltID0gW107XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXROZXh0SXRlbSgpIHtcbiAgICB2YXIgbmV4dEl0ZW1JbmRleCA9IDA7XG4gICAgJC5lYWNoKGRvdHMsIGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xuICAgICAgaWYgKCQoaXRlbSkuaGFzQ2xhc3MoJ2FjdGl2ZScpICYmIGluZGV4IDwgZG90cy5sZW5ndGggLSAxKSB7XG4gICAgICAgIG5leHRJdGVtSW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbmV4dEl0ZW1JbmRleDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFByZXZJdGVtKCkge1xuICAgIHZhciBwcmV2SXRlbSA9IGRvdHMubGVuZ3RoIC0gMTtcbiAgICAkLmVhY2goZG90cywgZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XG4gICAgICBpZiAoJChpdGVtKS5oYXNDbGFzcygnYWN0aXZlJykgJiYgaW5kZXggPCBkb3RzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgcHJldkl0ZW0gPSBpbmRleDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBwcmV2SXRlbTtcbiAgfVxufVxuXG4kLnZhbGlkYXRvci5tZXRob2RzLm51bWJlciA9IGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICByZXR1cm4gdGhpcy5vcHRpb25hbChlbGVtZW50KSB8fCAvXlswLTkrXFwtKCkg4oCUXSskLy50ZXN0KHZhbHVlKTtcbn07XG5cbnZhciBoaWRlID0gZnVuY3Rpb24gaGlkZShlbGVtKSB7XG4gIHJldHVybiBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG59O1xuXG4kKCdmb3JtJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICQodGhpcykudmFsaWRhdGUoe1xuICAgIHNob3dFcnJvcnM6IGZ1bmN0aW9uIHNob3dFcnJvcnMoZXJyb3JNYXAsIGVycm9yTGlzdCkge1xuICAgICAgaWYgKGVycm9yTWFwWydhdHRhY2gnXSkgTm90aWZ5KHVwbG9hZEVycm9yTWVzc2FnZSwgbm90aWZ5RGVsYXkpO1xuICAgICAgdGhpcy5kZWZhdWx0U2hvd0Vycm9ycygpO1xuICAgIH0sXG4gICAgcnVsZXM6IHtcbiAgICAgIG5hbWU6IHtcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIG1heGxlbmd0aDogMjU1XG4gICAgICB9LFxuICAgICAgbGFzdF9uYW1lOiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBtYXhsZW5ndGg6IDI1NVxuICAgICAgfSxcbiAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBtYXhsZW5ndGg6IDI1NVxuICAgICAgfSxcbiAgICAgIGNvbXBhbnk6IHtcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIG1heGxlbmd0aDogMjU1XG4gICAgICB9LFxuICAgICAgZW1haWw6IHtcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICBtYXhsZW5ndGg6IDI1NVxuICAgICAgfSxcbiAgICAgIHBob25lOiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBudW1iZXI6IHRydWUsXG4gICAgICAgIG1heGxlbmd0aDogMjU1LFxuICAgICAgICBtaW5sZW5ndGg6IDVcbiAgICAgIH0sXG4gICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIG1heGxlbmd0aDogNjU1MzVcbiAgICAgIH1cbiAgICB9LFxuICAgIG1lc3NhZ2VzOiB7XG4gICAgICBlbWFpbDoge1xuICAgICAgICBlbWFpbDogJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3MuJ1xuICAgICAgfVxuICAgIH0sXG4gICAgc3VibWl0SGFuZGxlcjogZnVuY3Rpb24gc3VibWl0SGFuZGxlcihmb3JtLCBldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciByb3dEYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xuICAgICAgdmFyIHVybCA9IGZvcm0uZ2V0QXR0cmlidXRlKCdkYXRhLXVybCcpO1xuICAgICAgdmFyIGNvbnRhY3RFcnJvck1lc3NhZ2UgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5yZWdpc3RyYXRpb25fX2Vycm9yJyk7XG4gICAgICB2YXIgdGh4TWVzc2FnZSA9IGZvcm0ubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgcm93RGF0YS5hcHBlbmQoJ2hhbmRsZXJfaWQnLCBmb3JtLmRhdGFzZXQuaGFuZGxlcik7XG5cbiAgICAgIGhhbmRsZUZvcm1TdWJtaXQodXJsLCByb3dEYXRhLCB7XG4gICAgICAgIHR5cGU6IGZvcm0uZGF0YXNldC50eXBlXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cykge1xuICAgICAgICAgICQoJy5ub3RpZmljYXRpb24nKS5zaG93KCk7XG4gICAgICAgICAgJChcImZvcm1cIikudHJpZ2dlcihcInJlc2V0XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnRhY3RFcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSAnQ2hlY2sgc2VsZWN0ZWQgZmllbGRzLCBwbGVhc2UuJztcbiAgICAgICAgICBzaG93KGNvbnRhY3RFcnJvck1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJlcy5kYXRhKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgT2JqZWN0LmtleXMocmVzLmRhdGEpLm1hcChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dE5hbWUgPSBlcnJvci5zcGxpdCgnLScpWzFdO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltuYW1lPVwiICsgaW5wdXROYW1lICsgXCJdXCIpO1xuXG4gICAgICAgICAgICByZXR1cm4gaW5wdXQuY2xhc3NMaXN0LmFkZCgnaGFzLWVycm9yJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufSk7Il19
