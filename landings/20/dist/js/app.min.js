"use strict";var handleFormSubmit=window.handleFormSubmit,notifyDelay=1e4;$(".clients__container").owlCarousel({stagePadding:40,loop:!0,dots:!1,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,margin:20,responsive:{0:{items:1},768:{items:2},900:{items:3},1280:{items:4}}}),$(".about__awards").owlCarousel({loop:!0,dots:!1,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,nav:!0,navText:["",""],responsive:{0:{items:1},768:{items:3},1250:{items:4}}}),AOS.init(),$.validator.methods.number=function(e,t){return this.optional(t)||/^[0-9+\-() â€”]+$/.test(e)};var hide=function(e){return e.style.display="none"};function Notify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Default message",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,r=document.querySelector(".notify"),n=document.createElement("div"),o=document.createTextNode(e),a=document.body;return r&&a.removeChild(r),n.classList.add("notify"),n.addEventListener("click",function(e){return e.target.style.opacity=0}),n.appendChild(o),setTimeout(function(){n.style.opacity=1,n.style.transform="translateY(0)"},300),setTimeout(function(){n.style.opacity=0,n.style.transform="translateY(200%)"},t),a.appendChild(n)}$("form").each(function(){$(this).validate({showErrors:function(e,t){e.attach&&Notify(uploadErrorMessage,notifyDelay),this.defaultShowErrors()},rules:{name:{required:!0,maxlength:255},last_name:{required:!0,maxlength:255},position:{required:!0,maxlength:255},company:{required:!0,maxlength:255},email:{required:!0,email:!0,maxlength:255},phone:{required:!0,number:!0,maxlength:255,minlength:5},description:{required:!1,maxlength:65535}},messages:{email:{email:"Please enter a valid email address."}},submitHandler:function(e,t){t.preventDefault();var r=new FormData(e),n=e.getAttribute("data-url"),o=e.querySelector(".registration__error");e.nextElementSibling;r.append("handler_id",e.dataset.handler),handleFormSubmit(n,r,{type:e.dataset.type}).then(function(e){e.data.status?($(".notification").show(),$("form").trigger("reset")):(o.textContent="Check selected fields, please.",show(o)),Object.keys(e.data).length>1&&Object.keys(e.data).map(function(e){var t=e.split("-")[1];return document.querySelector("[name="+t+"]").classList.add("has-error")})}).catch(function(e){console.log(e)})}})});var newsletter=document.querySelector(".newsletter"),newsletterOk=document.querySelectorAll(".popup-ok"),docHeight=document.querySelector("body").offsetHeight,triggerHeight=.75*docHeight-window.innerHeight,newsLetterKey="isNewsletter",twoWeeks=12096e5,dateNow=Date.now(),newsLetterShown={date:dateNow+twoWeeks,shown:!0};function showNewsletterPopup(){var e=JSON.parse(localStorage.getItem(newsLetterKey));if(!e||e.date<dateNow)return newsletter&&newsletter.classList.add("newsletter--show")}if(newsletterOk&&[].forEach.call(newsletterOk,function(e){e.addEventListener("click",function(){newsletter.classList.remove("newsletter--show"),localStorage.setItem(newsLetterKey,JSON.stringify(newsLetterShown))})}),window.addEventListener("scroll",function(){window.scrollY>triggerHeight&&showNewsletterPopup()}),$(document).on("click",'a[href^="#"]',function(e){e.preventDefault(),$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top},500)}),$(".footer__year").length){var currentYear=(new Date).getFullYear();$(".footer__year").text(currentYear)}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaGFuZGxlRm9ybVN1Ym1pdCIsIndpbmRvdyIsIm5vdGlmeURlbGF5IiwiJCIsIm93bENhcm91c2VsIiwic3RhZ2VQYWRkaW5nIiwibG9vcCIsImRvdHMiLCJhdXRvcGxheSIsImF1dG9wbGF5VGltZW91dCIsImF1dG9wbGF5SG92ZXJQYXVzZSIsIm1hcmdpbiIsInJlc3BvbnNpdmUiLCIwIiwiaXRlbXMiLCI3NjgiLCI5MDAiLCIxMjgwIiwibmF2IiwibmF2VGV4dCIsIjEyNTAiLCJBT1MiLCJpbml0IiwidmFsaWRhdG9yIiwibWV0aG9kcyIsIm51bWJlciIsInZhbHVlIiwiZWxlbWVudCIsInRoaXMiLCJvcHRpb25hbCIsInRlc3QiLCJoaWRlIiwiZWxlbSIsInN0eWxlIiwiZGlzcGxheSIsIk5vdGlmeSIsIm1lc3NhZ2UiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJkZWxheSIsImV4aXN0aW5nTm90aWZ5IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwid3JhcHBlciIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Tm9kZSIsImNyZWF0ZVRleHROb2RlIiwiYm9keSIsInJlbW92ZUNoaWxkIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0YXJnZXQiLCJvcGFjaXR5IiwiYXBwZW5kQ2hpbGQiLCJzZXRUaW1lb3V0IiwidHJhbnNmb3JtIiwiZWFjaCIsInZhbGlkYXRlIiwic2hvd0Vycm9ycyIsImVycm9yTWFwIiwiZXJyb3JMaXN0IiwidXBsb2FkRXJyb3JNZXNzYWdlIiwiZGVmYXVsdFNob3dFcnJvcnMiLCJydWxlcyIsIm5hbWUiLCJyZXF1aXJlZCIsIm1heGxlbmd0aCIsImxhc3RfbmFtZSIsInBvc2l0aW9uIiwiY29tcGFueSIsImVtYWlsIiwicGhvbmUiLCJtaW5sZW5ndGgiLCJkZXNjcmlwdGlvbiIsIm1lc3NhZ2VzIiwic3VibWl0SGFuZGxlciIsImZvcm0iLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwicm93RGF0YSIsIkZvcm1EYXRhIiwidXJsIiwiZ2V0QXR0cmlidXRlIiwiY29udGFjdEVycm9yTWVzc2FnZSIsIm5leHRFbGVtZW50U2libGluZyIsImFwcGVuZCIsImRhdGFzZXQiLCJoYW5kbGVyIiwidHlwZSIsInRoZW4iLCJyZXMiLCJkYXRhIiwic3RhdHVzIiwic2hvdyIsInRyaWdnZXIiLCJ0ZXh0Q29udGVudCIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJlcnJvciIsImlucHV0TmFtZSIsInNwbGl0IiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwibmV3c2xldHRlciIsIm5ld3NsZXR0ZXJPayIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkb2NIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJ0cmlnZ2VySGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJuZXdzTGV0dGVyS2V5IiwidHdvV2Vla3MiLCJkYXRlTm93IiwiRGF0ZSIsIm5vdyIsIm5ld3NMZXR0ZXJTaG93biIsImRhdGUiLCJzaG93biIsInNob3dOZXdzbGV0dGVyUG9wdXAiLCJpc05ld3NMZXR0ZXIiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZm9yRWFjaCIsImNhbGwiLCJpdGVtIiwicmVtb3ZlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInNjcm9sbFkiLCJvbiIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJhdHRyIiwib2Zmc2V0IiwidG9wIiwiY3VycmVudFllYXIiLCJnZXRGdWxsWWVhciIsInRleHQiXSwibWFwcGluZ3MiOiJBQUFBLGFBRUEsSUFBQUEsaUJBQUFDLE9BQUFELGlCQUNBRSxZQUFBLElBR0FDLEVBQUEsdUJBQUFDLGFBQ0FDLGFBQUEsR0FDQUMsTUFBQSxFQUVBQyxNQUFBLEVBQ0FDLFVBQUEsRUFDQUMsZ0JBQUEsSUFDQUMsb0JBQUEsRUFDQUMsT0FBQSxHQUNBQyxZQUNBQyxHQUNBQyxNQUFBLEdBRUFDLEtBQ0FELE1BQUEsR0FFQUUsS0FDQUYsTUFBQSxH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LFFBQUFxRSxhQUNBQyxjQUFBLElBQUFGLFVBQUE5RyxPQUFBaUgsWUFDQUMsY0FBQSxlQUNBQyxTQUFBLFFBQ0FDLFFBQUFDLEtBQUFDLE1BQ0FDLGlCQUNBQyxLQUFBSixRQUFBRCxTQUNBTSxPQUFBLEdBR0EsU0FBQUMsc0JBQ0EsSUFBQUMsRUFBQUMsS0FBQUMsTUFBQUMsYUFBQUMsUUFBQWIsZ0JBQ0EsSUFBQVMsR0FBQUEsRUFBQUgsS0FBQUosUUFDQSxPQUFBVCxZQUFBQSxXQUFBMUQsVUFBQUMsSUFBQSxvQkF3QkEsR0FwQkEwRCxpQkFBQW9CLFFBQUFDLEtBQUFyQixhQUFBLFNBQUFzQixHQUNBQSxFQUFBL0UsaUJBQUEsUUFBQSxXQUNBd0QsV0FBQTFELFVBQUFrRixPQUFBLG9CQUNBTCxhQUFBTSxRQUFBbEIsY0FBQVUsS0FBQVMsVUFBQWQsc0JBSUF2SCxPQUFBbUQsaUJBQUEsU0FBQSxXQUNBbkQsT0FBQXNJLFFBQ0F0QixlQUFBVSx3QkFHQXhILEVBQUF1QyxVQUFBOEYsR0FBQSxRQUFBLGVBQUEsU0FBQXhELEdBQ0FBLEVBQUFDLGlCQUVBOUUsRUFBQSxjQUFBc0ksU0FDQUMsVUFBQXZJLEVBQUFBLEVBQUF3SSxLQUFBL0csS0FBQSxTQUFBZ0gsU0FBQUMsS0FDQSxPQUdBMUksRUFBQSxpQkFBQW1DLE9BQUEsQ0FDQSxJQUFBd0csYUFBQSxJQUFBeEIsTUFBQXlCLGNBQ0E1SSxFQUFBLGlCQUFBNkksS0FBQUYiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGhhbmRsZUZvcm1TdWJtaXQgPSB3aW5kb3cuaGFuZGxlRm9ybVN1Ym1pdDsgLy8gV2UgZ290IGl0IGZyb20gdHJhY2Nvb24gcHJvamVjdC5cbnZhciBub3RpZnlEZWxheSA9IDEwMDAwO1xuXG4vLyBDbGllbnRzIHNlY3Rpb25cbiQoJy5jbGllbnRzX19jb250YWluZXInKS5vd2xDYXJvdXNlbCh7XG4gICAgc3RhZ2VQYWRkaW5nOiA0MCxcbiAgICBsb29wOiB0cnVlLFxuICAgIC8vIGF1dG9XaWR0aDogdHJ1ZSxcbiAgICBkb3RzOiBmYWxzZSxcbiAgICBhdXRvcGxheTogdHJ1ZSxcbiAgICBhdXRvcGxheVRpbWVvdXQ6IDMwMDAsXG4gICAgYXV0b3BsYXlIb3ZlclBhdXNlOiB0cnVlLFxuICAgIG1hcmdpbjogMjAsXG4gICAgcmVzcG9uc2l2ZToge1xuICAgICAgICAwOiB7XG4gICAgICAgICAgICBpdGVtczogMVxuICAgICAgICB9LFxuICAgICAgICA3Njg6IHtcbiAgICAgICAgICAgIGl0ZW1zOiAyXG4gICAgICAgIH0sXG4gICAgICAgIDkwMDoge1xuICAgICAgICAgICAgaXRlbXM6IDNcbiAgICAgICAgfSxcbiAgICAgICAgMTI4MDoge1xuICAgICAgICAgICAgaXRlbXM6IDRcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4vLyBBd2FyZHMgc2VjdGlvblxuJCgnLmFib3V0X19hd2FyZHMnKS5vd2xDYXJvdXNlbCh7XG4gICAgbG9vcDogdHJ1ZSxcbiAgICBkb3RzOiBmYWxzZSxcbiAgICBhdXRvcGxheTogdHJ1ZSxcbiAgICBhdXRvcGxheVRpbWVvdXQ6IDMwMDAsXG4gICAgYXV0b3BsYXlIb3ZlclBhdXNlOiB0cnVlLFxuICAgIG5hdjogdHJ1ZSxcbiAgICBuYXZUZXh0OiBbXCJcIiwgXCJcIl0sXG4gICAgcmVzcG9uc2l2ZToge1xuICAgICAgICAwOiB7XG4gICAgICAgICAgICBpdGVtczogMVxuICAgICAgICB9LFxuICAgICAgICA3Njg6IHtcbiAgICAgICAgICAgIGl0ZW1zOiAzXG4gICAgICAgIH0sXG4gICAgICAgIDEyNTA6IHtcbiAgICAgICAgICAgIGl0ZW1zOiA0XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuQU9TLmluaXQoKTtcblxuJC52YWxpZGF0b3IubWV0aG9kcy5udW1iZXIgPSBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25hbChlbGVtZW50KSB8fCAvXlswLTkrXFwtKCkg4oCUXSskLy50ZXN0KHZhbHVlKTtcbn07XG5cbnZhciBoaWRlID0gZnVuY3Rpb24gaGlkZShlbGVtKSB7XG4gICAgcmV0dXJuIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbn07XG5cbiQoJ2Zvcm0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLnZhbGlkYXRlKHtcbiAgICAgICAgc2hvd0Vycm9yczogZnVuY3Rpb24gc2hvd0Vycm9ycyhlcnJvck1hcCwgZXJyb3JMaXN0KSB7XG4gICAgICAgICAgICBpZiAoZXJyb3JNYXBbJ2F0dGFjaCddKSBOb3RpZnkodXBsb2FkRXJyb3JNZXNzYWdlLCBub3RpZnlEZWxheSk7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRTaG93RXJyb3JzKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJ1bGVzOiB7XG4gICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAyNTVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYXN0X25hbWU6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtYXhsZW5ndGg6IDI1NVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAyNTVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb21wYW55OiB7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAyNTVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1heGxlbmd0aDogMjU1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGhvbmU6IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBudW1iZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiAyNTUsXG4gICAgICAgICAgICAgICAgbWlubGVuZ3RoOiA1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiA2NTUzNVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBtZXNzYWdlczoge1xuICAgICAgICAgICAgZW1haWw6IHtcbiAgICAgICAgICAgICAgICBlbWFpbDogJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3MuJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzdWJtaXRIYW5kbGVyOiBmdW5jdGlvbiBzdWJtaXRIYW5kbGVyKGZvcm0sIGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHJvd0RhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XG4gICAgICAgICAgICB2YXIgdXJsID0gZm9ybS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXJsJyk7XG4gICAgICAgICAgICB2YXIgY29udGFjdEVycm9yTWVzc2FnZSA9IGZvcm0ucXVlcnlTZWxlY3RvcignLnJlZ2lzdHJhdGlvbl9fZXJyb3InKTtcbiAgICAgICAgICAgIHZhciB0aHhNZXNzYWdlID0gZm9ybS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICByb3dEYXRhLmFwcGVuZCgnaGFuZGxlcl9pZCcsIGZvcm0uZGF0YXNldC5oYW5kbGVyKTtcblxuICAgICAgICAgICAgaGFuZGxlRm9ybVN1Ym1pdCh1cmwsIHJvd0RhdGEsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBmb3JtLmRhdGFzZXQudHlwZVxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICAkKCcubm90aWZpY2F0aW9uJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiZm9ybVwiKS50cmlnZ2VyKFwicmVzZXRcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFjdEVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9ICdDaGVjayBzZWxlY3RlZCBmaWVsZHMsIHBsZWFzZS4nO1xuICAgICAgICAgICAgICAgICAgICBzaG93KGNvbnRhY3RFcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhyZXMuZGF0YSkubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhyZXMuZGF0YSkubWFwKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0TmFtZSA9IGVycm9yLnNwbGl0KCctJylbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbmFtZT0nICsgaW5wdXROYW1lICsgJ10nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LmNsYXNzTGlzdC5hZGQoJ2hhcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cbmZ1bmN0aW9uIE5vdGlmeSgpIHtcbiAgICB2YXIgbWVzc2FnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ0RlZmF1bHQgbWVzc2FnZSc7XG4gICAgdmFyIGRlbGF5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAzMDAwO1xuXG4gICAgdmFyIGV4aXN0aW5nTm90aWZ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5vdGlmeScpO1xuICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobWVzc2FnZSk7XG4gICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXG4gICAgaWYgKGV4aXN0aW5nTm90aWZ5KSBib2R5LnJlbW92ZUNoaWxkKGV4aXN0aW5nTm90aWZ5KTtcblxuICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnbm90aWZ5Jyk7XG4gICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBlLnRhcmdldC5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICB9KTtcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHRleHROb2RlKTtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB3cmFwcGVyLnN0eWxlLm9wYWNpdHkgPSAxO1xuICAgICAgICB3cmFwcGVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDApJztcbiAgICB9LCAzMDApO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdyYXBwZXIuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgICAgIHdyYXBwZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMjAwJSknO1xuICAgIH0sIGRlbGF5KTtcblxuICAgIHJldHVybiBib2R5LmFwcGVuZENoaWxkKHdyYXBwZXIpO1xufVxuXG52YXIgbmV3c2xldHRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXdzbGV0dGVyJyk7XG52YXIgbmV3c2xldHRlck9rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwLW9rJyk7XG52YXIgZG9jSGVpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLm9mZnNldEhlaWdodDtcbnZhciB0cmlnZ2VySGVpZ2h0ID0gZG9jSGVpZ2h0ICogMC43NSAtIHdpbmRvdy5pbm5lckhlaWdodDtcbnZhciBuZXdzTGV0dGVyS2V5ID0gJ2lzTmV3c2xldHRlcic7XG52YXIgdHdvV2Vla3MgPSA3ICogMjQgKiA2MCAqIDYwICogMTAwMCAqIDI7XG52YXIgZGF0ZU5vdyA9IERhdGUubm93KCk7XG52YXIgbmV3c0xldHRlclNob3duID0ge1xuICAgIGRhdGU6IGRhdGVOb3cgKyB0d29XZWVrcyxcbiAgICBzaG93bjogdHJ1ZVxufTtcblxuZnVuY3Rpb24gc2hvd05ld3NsZXR0ZXJQb3B1cCgpIHtcbiAgICB2YXIgaXNOZXdzTGV0dGVyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShuZXdzTGV0dGVyS2V5KSk7XG4gICAgaWYgKCFpc05ld3NMZXR0ZXIgfHwgaXNOZXdzTGV0dGVyLmRhdGUgPCBkYXRlTm93KSB7XG4gICAgICAgIHJldHVybiBuZXdzbGV0dGVyICYmIG5ld3NsZXR0ZXIuY2xhc3NMaXN0LmFkZCgnbmV3c2xldHRlci0tc2hvdycpO1xuICAgIH1cbn1cblxubmV3c2xldHRlck9rICYmIFtdLmZvckVhY2guY2FsbChuZXdzbGV0dGVyT2ssIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbmV3c2xldHRlci5jbGFzc0xpc3QucmVtb3ZlKCduZXdzbGV0dGVyLS1zaG93Jyk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKG5ld3NMZXR0ZXJLZXksIEpTT04uc3RyaW5naWZ5KG5ld3NMZXR0ZXJTaG93bikpO1xuICAgIH0pO1xufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNjcm9sbEhlaWdodCA9IHdpbmRvdy5zY3JvbGxZO1xuICAgIHNjcm9sbEhlaWdodCA+IHRyaWdnZXJIZWlnaHQgPyBzaG93TmV3c2xldHRlclBvcHVwKCkgOiAnJztcbn0pO1xuXG4kKGRvY3VtZW50KS5vbignY2xpY2snLCAnYVtocmVmXj1cIiNcIl0nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgICBzY3JvbGxUb3A6ICQoJC5hdHRyKHRoaXMsICdocmVmJykpLm9mZnNldCgpLnRvcFxuICAgIH0sIDUwMCk7XG59KTtcblxuaWYgKCQoJy5mb290ZXJfX3llYXInKS5sZW5ndGgpIHtcbiAgICB2YXIgY3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG4gICAgJCgnLmZvb3Rlcl9feWVhcicpLnRleHQoY3VycmVudFllYXIpO1xufSJdfQ==
