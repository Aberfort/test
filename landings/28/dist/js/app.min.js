"use strict";function Notify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Default message",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n=document.querySelector(".notify"),o=document.createElement("div"),a=document.createTextNode(e),r=document.body;return n&&r.removeChild(n),o.classList.add("notify"),o.addEventListener("click",function(e){return e.target.style.opacity=0}),o.appendChild(a),setTimeout(function(){o.style.opacity=1,o.style.transform="translateY(0)"},300),setTimeout(function(){o.style.opacity=0,o.style.transform="translateY(200%)"},t),r.appendChild(o)}$(document).ready(function(){var e=function(e){var t,n,o=window.location.search.substring(1).split("&");for(n=0;n<o.length;n++)if((t=o[n].split("="))[0]===e)return void 0===t[1]||decodeURIComponent(t[1])},t=e("kw"),n=e("location");t&&n?$(".kw").append(t+" in "+n):t?$(".kw").append(t):n?$(".kw").append("Mobile App Development Company in "+n):$(".kw").append("Mobile App Development Company"),$("meta[name=description]").remove(),$("head").append('<meta name="description" content="Quickly build the team you need with our '+t+" in "+n+'. Employ the best app developers for your mobile app now.">'),document.title=t+" | Intellectsoft US",$(".video-play").vide("/static/7/images/video/video",{posterType:"jpg",className:"video-container"})}),$(".clients__container").owlCarousel({loop:!0,dots:!1,nav:!0,navText:["",""],autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,margin:10,responsive:{0:{items:1},768:{items:2,autoWidth:!0},1020:{items:3,autoWidth:!0},1280:{items:4}}}),$(".about__awards").owlCarousel({loop:!0,dots:!1,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,nav:!0,navText:["",""],responsive:{0:{items:1},768:{items:3},1250:{items:4}}}),AOS.init();var newsletter=document.querySelector(".newsletter"),newsletterOk=document.querySelectorAll(".popup-ok"),docHeight=document.querySelector("body").offsetHeight,triggerHeight=.75*docHeight-window.innerHeight,newsLetterKey="isNewsletter",twoWeeks=12096e5,dateNow=Date.now(),newsLetterShown={date:dateNow+twoWeeks,shown:!0};function showNewsletterPopup(){var e=JSON.parse(localStorage.getItem(newsLetterKey));if(!e||e.date<dateNow)return newsletter&&newsletter.classList.add("newsletter--show")}if(newsletterOk&&[].forEach.call(newsletterOk,function(e){e.addEventListener("click",function(){newsletter.classList.remove("newsletter--show"),localStorage.setItem(newsLetterKey,JSON.stringify(newsLetterShown))})}),window.addEventListener("scroll",function(){window.scrollY>triggerHeight&&showNewsletterPopup()}),$(document).on("click",'a[href^="#"]',function(e){e.preventDefault(),$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top},500)}),$(".footer__year").length){var currentYear=(new Date).getFullYear();$(".footer__year").text(currentYear)}$('html[lang="no"]').length&&($(".work__cta").addClass("work__cta--no"),$(".work__cta-title").addClass("work__cta-title--no"),$(".competence__content").addClass("competence__content--no"));var owl=$("#ranking"),form=$("#formRanking");function fillInOwlInit(e,t,n,o,a,r,i,s,l,d,c,u,m,p,f){var h=void 0,w=0,g=1,y=[];function v(){(h=$(t+" .owl-dot")).length&&!c&&k()}function k(){w+=50/(60*i),g-=1/(60*i),$(h[_()]).find("span").css({"border-color":"rgba("+s+", "+g+")"}),window.innerWidth<=599?$(h[b()]).find("span").css({"border-left":"solid "+w/2+"px rgba("+s+", 1)"}):$(h[b()]).find("span").css({"border-left":"solid "+w+"px rgba("+s+", 1)"}),w<50?y.push(requestAnimationFrame(k)):(w=0,g=1,$(h[_()]).find("span").removeAttr("style"),$(h[b()]).find("span").css({"border-left":""}),h.one("click",function(){y.forEach(function(e){cancelAnimationFrame(e)}),y=[]}),h[b()].click())}function b(){var e=0;return $.each(h,function(t,n){$(n).hasClass("active")&&t<h.length-1&&(e=t+1)}),e}function _(){var e=h.length-1;return $.each(h,function(t,n){$(n).hasClass("active")&&t<h.length-1&&(e=t)}),e}e.length>0&&e.owlCarousel({loop:u,lazyLoad:!0,margin:l,nav:c,items:o,dots:m,autoplay:n,autoplayTimeout:7e3,autoplaySpeed:2e3,smartSpeed:600,onInitialized:v,onChange:function(e){"position"===e.property.name&&(w=50);h.find("span").removeAttr("style"),w=0,g=1},onChanged:v,responsive:{0:{items:d?2:1,margin:0,dots:f,nav:!1,loop:!0,autoplay:!1,autoplayTimeout:p},600:{items:d?r:a,margin:d?25:l},1e3:{items:r,margin:d?25:l}}})}fillInOwlInit(owl,".ranking",!0,4,4,7,10,"0, 110, 250",5,!1,!1,!1,!0,2e3,!1,5),fillInOwlInit(form,".ranking-form",!1,4,2,3,6,"255, 255, 255",10,!0,!1,!1,!0,2e3,!0,9),$.validator.methods.number=function(e,t){return this.optional(t)||/^[0-9+\-() â€”]+$/.test(e)};var hide=function(e){return e.style.display="none"};$("form").each(function(){$(this).validate({showErrors:function(e,t){e.attach&&Notify(uploadErrorMessage,notifyDelay),this.defaultShowErrors()},rules:{name:{required:!0,maxlength:255},last_name:{required:!0,maxlength:255},position:{required:!0,maxlength:255},company:{required:!0,maxlength:255},email:{required:!0,email:!0,maxlength:255},phone:{required:!0,number:!0,maxlength:255,minlength:5},description:{required:!1,maxlength:65535}},messages:{email:{email:"Please enter a valid email address."}},submitHandler:function(e,t){t.preventDefault();var n=new FormData(e),o=e.getAttribute("data-url"),a=e.querySelector(".registration__error");e.nextElementSibling;n.append("handler_id",e.dataset.handler),handleFormSubmit(o,n,{type:e.dataset.type}).then(function(e){e.data.status?($(".notification").show(),$("form").trigger("reset")):(a.textContent="Check selected fields, please.",show(a)),Object.keys(e.data).length>1&&Object.keys(e.data).map(function(e){var t=e.split("-")[1];return document.querySelector("[name="+t+"]").classList.add("has-error")})}).catch(function(e){console.log(e)})}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiTm90aWZ5IiwibWVzc2FnZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImRlbGF5IiwiZXhpc3RpbmdOb3RpZnkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ3cmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsInRleHROb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJib2R5IiwicmVtb3ZlQ2hpbGQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsInN0eWxlIiwib3BhY2l0eSIsImFwcGVuZENoaWxkIiwic2V0VGltZW91dCIsInRyYW5zZm9ybSIsIiQiLCJyZWFkeSIsImdldFVybFBhcmFtZXRlciIsInNQYXJhbSIsInNQYXJhbWV0ZXJOYW1lIiwiaSIsInNVUkxWYXJpYWJsZXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsInN1YnN0cmluZyIsInNwbGl0IiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwia3ciLCJhcHBlbmQiLCJyZW1vdmUiLCJ0aXRsZSIsInZpZGUiLCJwb3N0ZXJUeXBlIiwiY2xhc3NOYW1lIiwib3dsQ2Fyb3VzZWwiLCJsb29wIiwiZG90cyIsIm5hdiIsIm5hdlRleHQiLCJhdXRvcGxheSIsImF1dG9wbGF5VGltZW91dCIsImF1dG9wbGF5SG92ZXJQYXVzZSIsIm1hcmdpbiIsInJlc3BvbnNpdmUiLCIwIiwiaXRlbXMiLCI3NjgiLCJhdXRvV2lkdGgiLCIxMDIwIiwiMTI4MCIsIjEyNTAiLCJBT1MiLCJpbml0IiwibmV3c2xldHRlciIsIm5ld3NsZXR0ZXJPayIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkb2NIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJ0cmlnZ2VySGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJuZXdzTGV0dGVyS2V5IiwidHdvV2Vla3MiLCJkYXRlTm93IiwiRGF0ZSIsIm5vdyIsIm5ld3NMZXR0ZXJTaG93biIsImRhdGUiLCJzaG93biIsInNob3dOZXdzbGV0dGVyUG9wdXAiLCJpc05ld3NMZXR0ZXIiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZm9yRWFjaCIsImNhbGwiLCJpdGVtIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInNjcm9sbFkiLCJvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiYXR0ciIsInRoaXMiLCJvZmZzZXQiLCJ0b3AiLCJjdXJyZW50WWVhciIsImdldEZ1bGxZZWFyIiwidGV4dCIsImFkZENsYXNzIiwib3dsIiwiZm9ybSIsImZpbGxJbk93bEluaXQiLCJzbGlkZXJDb250YWluZXIiLCJpdGVtc01vYmlsZSIsIml0ZW1zVGFibGV0Iiwic3BlZWQiLCJjb2xvciIsImRvdCIsImF1dG9wbGF5VGltZW91dE1vYmlsZSIsImRvdE1vYmlsZSIsIndpZHRoIiwid2lkdGhBbmltIiwib3dsSW5pdEZ1bmN0aW9uIiwic3RlcCIsImdldFByZXZJdGVtIiwiZmluZCIsImNzcyIsImJvcmRlci1jb2xvciIsImlubmVyV2lkdGgiLCJnZXROZXh0SXRlbSIsImJvcmRlci1sZWZ0IiwicHVzaCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInJlbW92ZUF0dHIiLCJvbmUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImNsaWNrIiwibmV4dEl0ZW1JbmRleCIsImVhY2giLCJpbmRleCIsImhhc0NsYXNzIiwicHJldkl0ZW0iLCJsYXp5TG9hZCIsImF1dG9wbGF5U3BlZWQiLCJzbWFydFNwZWVkIiwib25Jbml0aWFsaXplZCIsIm9uQ2hhbmdlIiwicHJvcCIsInByb3BlcnR5IiwibmFtZSIsIm9uQ2hhbmdlZCIsIjYwMCIsIjEwMDAiLCJ2YWxpZGF0b3IiLCJtZXRob2RzIiwibnVtYmVyIiwidmFsdWUiLCJlbGVtZW50Iiwib3B0aW9uYWwiLCJ0ZXN0IiwiaGlkZSIsImVsZW0iLCJkaXNwbGF5IiwidmFsaWRhdGUiLCJzaG93RXJyb3JzIiwiZXJyb3JNYXAiLCJlcnJvckxpc3QiLCJ1cGxvYWRFcnJvck1lc3NhZ2UiLCJub3RpZnlEZWxheSIsImRlZmF1bHRTaG93RXJyb3JzIiwicnVsZXMiLCJyZXF1aXJlZCIsIm1heGxlbmd0aCIsImxhc3RfbmFtZSIsInBvc2l0aW9uIiwiY29tcGFueSIsImVtYWlsIiwicGhvbmUiLCJtaW5sZW5ndGgiLCJkZXNjcmlwdGlvbiIsIm1lc3NhZ2VzIiwic3VibWl0SGFuZGxlciIsInJvd0RhdGEiLCJGb3JtRGF0YSIsInVybCIsImdldEF0dHJpYnV0ZSIsImNvbnRhY3RFcnJvck1lc3NhZ2UiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJkYXRhc2V0IiwiaGFuZGxlciIsImhhbmRsZUZvcm1TdWJtaXQiLCJ0eXBlIiwidGhlbiIsInJlcyIsImRhdGEiLCJzdGF0dXMiLCJzaG93IiwidHJpZ2dlciIsInRleHRDb250ZW50IiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImVycm9yIiwiaW5wdXROYW1lIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiQUFBQSxhQXFHQSxTQUFBQSxTQUNBLElBQUFDLEVBQUFDLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUEsa0JBQ0FHLEVBQUFILFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUEsSUFFQUksRUFBQUMsU0FBQUMsY0FBQSxXQUNBQyxFQUFBRixTQUFBRyxjQUFBLE9BQ0FDLEVBQUFKLFNBQUFLLGVBQUFYLEdBQ0FZLEVBQUFOLFNBQUFNLEtBb0JBLE9BbEJBUCxHQUFBTyxFQUFBQyxZQUFBUixHQUVBRyxFQUFBTSxVQUFBQyxJQUFBLFVBQ0FQLEVBQUFRLGlCQUFBLFFBQUEsU0FBQUMsR0FDQSxPQUFBQSxFQUFBQyxPQUFBQyxNQUFBQyxRQUFBLElBRUFaLEVBQUFhLFlBQUFYLEdBRUFZLFdBQUEsV0FDQWQsRUFBQVcsTUFBQUMsUUFBQSxFQUNBWixFQUFBVyxNQUFBSSxVQUFBLGlCQUNBLEtBRUFE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LE1BQUFPLElBQUEsU0FBQUMsR0FDQSxJQUFBQyxFQUFBRCxFQUFBakssTUFBQSxLQUFBLEdBR0EsT0FGQTdCLFNBQUFDLGNBQUEsU0FBQThMLEVBQUEsS0FFQXZMLFVBQUFDLElBQUEsaUJBR0F1TCxNQUFBLFNBQUFGLEdBQ0FHLFFBQUFDLElBQUFKIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblxuICB2YXIgZ2V0VXJsUGFyYW1ldGVyID0gZnVuY3Rpb24gZ2V0VXJsUGFyYW1ldGVyKHNQYXJhbSkge1xuICAgIHZhciBzUGFnZVVSTCA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpLFxuICAgICAgICBzVVJMVmFyaWFibGVzID0gc1BhZ2VVUkwuc3BsaXQoJyYnKSxcbiAgICAgICAgc1BhcmFtZXRlck5hbWUsXG4gICAgICAgIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgc1VSTFZhcmlhYmxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgc1BhcmFtZXRlck5hbWUgPSBzVVJMVmFyaWFibGVzW2ldLnNwbGl0KCc9Jyk7XG5cbiAgICAgIGlmIChzUGFyYW1ldGVyTmFtZVswXSA9PT0gc1BhcmFtKSB7XG4gICAgICAgIHJldHVybiBzUGFyYW1ldGVyTmFtZVsxXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGRlY29kZVVSSUNvbXBvbmVudChzUGFyYW1ldGVyTmFtZVsxXSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBrdyA9IGdldFVybFBhcmFtZXRlcigna3cnKTtcbiAgdmFyIGxvY2F0aW9uID0gZ2V0VXJsUGFyYW1ldGVyKCdsb2NhdGlvbicpO1xuXG4gIGlmIChrdyAmJiBsb2NhdGlvbikge1xuICAgICQoJy5rdycpLmFwcGVuZChrdyArICcgaW4gJyArIGxvY2F0aW9uKTtcbiAgfSBlbHNlIGlmIChrdykge1xuICAgICQoJy5rdycpLmFwcGVuZChrdyk7XG4gIH0gZWxzZSBpZiAobG9jYXRpb24pIHtcbiAgICAkKCcua3cnKS5hcHBlbmQoJ01vYmlsZSBBcHAgRGV2ZWxvcG1lbnQgQ29tcGFueSBpbiAnICsgbG9jYXRpb24pO1xuICB9IGVsc2Uge1xuICAgICQoJy5rdycpLmFwcGVuZCgnTW9iaWxlIEFwcCBEZXZlbG9wbWVudCBDb21wYW55Jyk7XG4gIH1cblxuICAkKCdtZXRhW25hbWU9ZGVzY3JpcHRpb25dJykucmVtb3ZlKCk7XG4gICQoJ2hlYWQnKS5hcHBlbmQoJzxtZXRhIG5hbWU9XCJkZXNjcmlwdGlvblwiIGNvbnRlbnQ9XCJRdWlja2x5IGJ1aWxkIHRoZSB0ZWFtIHlvdSBuZWVkIHdpdGggb3VyICcgKyBrdyArICcgaW4gJyArIGxvY2F0aW9uICsgJy4gRW1wbG95IHRoZSBiZXN0IGFwcCBkZXZlbG9wZXJzIGZvciB5b3VyIG1vYmlsZSBhcHAgbm93LlwiPicpO1xuXG4gIGRvY3VtZW50LnRpdGxlID0ga3cgKyAnIHwgSW50ZWxsZWN0c29mdCBVUyc7XG5cbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgLypcdFZpZGVvIEJhY2tncm91bmRcbiAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgJCgnLnZpZGVvLXBsYXknKS52aWRlKFwiL3N0YXRpYy83L2ltYWdlcy92aWRlby92aWRlb1wiLCB7XG4gICAgcG9zdGVyVHlwZTogXCJqcGdcIixcbiAgICBjbGFzc05hbWU6ICd2aWRlby1jb250YWluZXInXG4gIH0pO1xufSk7XG5cbi8vIENsaWVudHMgc2VjdGlvblxuJCgnLmNsaWVudHNfX2NvbnRhaW5lcicpLm93bENhcm91c2VsKHtcbiAgbG9vcDogdHJ1ZSxcbiAgZG90czogZmFsc2UsXG4gIG5hdjogdHJ1ZSxcbiAgbmF2VGV4dDogW1wiXCIsIFwiXCJdLFxuICBhdXRvcGxheTogdHJ1ZSxcbiAgYXV0b3BsYXlUaW1lb3V0OiAzMDAwLFxuICBhdXRvcGxheUhvdmVyUGF1c2U6IHRydWUsXG4gIG1hcmdpbjogMTAsXG4gIHJlc3BvbnNpdmU6IHtcbiAgICAwOiB7XG4gICAgICBpdGVtczogMVxuICAgIH0sXG4gICAgNzY4OiB7XG4gICAgICBpdGVtczogMixcbiAgICAgIGF1dG9XaWR0aDogdHJ1ZVxuICAgIH0sXG4gICAgMTAyMDoge1xuICAgICAgaXRlbXM6IDMsXG4gICAgICBhdXRvV2lkdGg6IHRydWVcbiAgICB9LFxuICAgIDEyODA6IHtcbiAgICAgIGl0ZW1zOiA0XG4gICAgfVxuICB9XG59KTtcblxuLy8gQXdhcmRzIHNlY3Rpb25cbiQoJy5hYm91dF9fYXdhcmRzJykub3dsQ2Fyb3VzZWwoe1xuICBsb29wOiB0cnVlLFxuICBkb3RzOiBmYWxzZSxcbiAgYXV0b3BsYXk6IHRydWUsXG4gIGF1dG9wbGF5VGltZW91dDogMzAwMCxcbiAgYXV0b3BsYXlIb3ZlclBhdXNlOiB0cnVlLFxuICBuYXY6IHRydWUsXG4gIG5hdlRleHQ6IFtcIlwiLCBcIlwiXSxcbiAgcmVzcG9uc2l2ZToge1xuICAgIDA6IHtcbiAgICAgIGl0ZW1zOiAxXG4gICAgfSxcbiAgICA3Njg6IHtcbiAgICAgIGl0ZW1zOiAzXG4gICAgfSxcbiAgICAxMjUwOiB7XG4gICAgICBpdGVtczogNFxuICAgIH1cbiAgfVxufSk7XG5cbkFPUy5pbml0KCk7XG5cbmZ1bmN0aW9uIE5vdGlmeSgpIHtcbiAgdmFyIG1lc3NhZ2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICdEZWZhdWx0IG1lc3NhZ2UnO1xuICB2YXIgZGVsYXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDMwMDA7XG5cbiAgdmFyIGV4aXN0aW5nTm90aWZ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5vdGlmeScpO1xuICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB2YXIgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShtZXNzYWdlKTtcbiAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXG4gIGlmIChleGlzdGluZ05vdGlmeSkgYm9keS5yZW1vdmVDaGlsZChleGlzdGluZ05vdGlmeSk7XG5cbiAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdub3RpZnknKTtcbiAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgcmV0dXJuIGUudGFyZ2V0LnN0eWxlLm9wYWNpdHkgPSAwO1xuICB9KTtcbiAgd3JhcHBlci5hcHBlbmRDaGlsZCh0ZXh0Tm9kZSk7XG5cbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgd3JhcHBlci5zdHlsZS5vcGFjaXR5ID0gMTtcbiAgICB3cmFwcGVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDApJztcbiAgfSwgMzAwKTtcblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICB3cmFwcGVyLnN0eWxlLm9wYWNpdHkgPSAwO1xuICAgIHdyYXBwZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMjAwJSknO1xuICB9LCBkZWxheSk7XG5cbiAgcmV0dXJuIGJvZHkuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG59XG5cbnZhciBuZXdzbGV0dGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ld3NsZXR0ZXInKTtcbnZhciBuZXdzbGV0dGVyT2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXAtb2snKTtcbnZhciBkb2NIZWlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jykub2Zmc2V0SGVpZ2h0O1xudmFyIHRyaWdnZXJIZWlnaHQgPSBkb2NIZWlnaHQgKiAwLjc1IC0gd2luZG93LmlubmVySGVpZ2h0O1xudmFyIG5ld3NMZXR0ZXJLZXkgPSAnaXNOZXdzbGV0dGVyJztcbnZhciB0d29XZWVrcyA9IDcgKiAyNCAqIDYwICogNjAgKiAxMDAwICogMjtcbnZhciBkYXRlTm93ID0gRGF0ZS5ub3coKTtcbnZhciBuZXdzTGV0dGVyU2hvd24gPSB7XG4gIGRhdGU6IGRhdGVOb3cgKyB0d29XZWVrcyxcbiAgc2hvd246IHRydWVcbn07XG5cbmZ1bmN0aW9uIHNob3dOZXdzbGV0dGVyUG9wdXAoKSB7XG4gIHZhciBpc05ld3NMZXR0ZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKG5ld3NMZXR0ZXJLZXkpKTtcbiAgaWYgKCFpc05ld3NMZXR0ZXIgfHwgaXNOZXdzTGV0dGVyLmRhdGUgPCBkYXRlTm93KSB7XG4gICAgcmV0dXJuIG5ld3NsZXR0ZXIgJiYgbmV3c2xldHRlci5jbGFzc0xpc3QuYWRkKCduZXdzbGV0dGVyLS1zaG93Jyk7XG4gIH1cbn1cblxubmV3c2xldHRlck9rICYmIFtdLmZvckVhY2guY2FsbChuZXdzbGV0dGVyT2ssIGZ1bmN0aW9uIChpdGVtKSB7XG4gIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgbmV3c2xldHRlci5jbGFzc0xpc3QucmVtb3ZlKCduZXdzbGV0dGVyLS1zaG93Jyk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obmV3c0xldHRlcktleSwgSlNPTi5zdHJpbmdpZnkobmV3c0xldHRlclNob3duKSk7XG4gIH0pO1xufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG4gIHZhciBzY3JvbGxIZWlnaHQgPSB3aW5kb3cuc2Nyb2xsWTtcbiAgc2Nyb2xsSGVpZ2h0ID4gdHJpZ2dlckhlaWdodCA/IHNob3dOZXdzbGV0dGVyUG9wdXAoKSA6ICcnO1xufSk7XG5cbiQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdhW2hyZWZePVwiI1wiXScsIGZ1bmN0aW9uIChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICBzY3JvbGxUb3A6ICQoJC5hdHRyKHRoaXMsICdocmVmJykpLm9mZnNldCgpLnRvcFxuICB9LCA1MDApO1xufSk7XG5cbmlmICgkKCcuZm9vdGVyX195ZWFyJykubGVuZ3RoKSB7XG4gIHZhciBjdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcbiAgJCgnLmZvb3Rlcl9feWVhcicpLnRleHQoY3VycmVudFllYXIpO1xufVxuXG5pZiAoJCgnaHRtbFtsYW5nPVwibm9cIl0nKS5sZW5ndGgpIHtcbiAgJCgnLndvcmtfX2N0YScpLmFkZENsYXNzKCd3b3JrX19jdGEtLW5vJyk7XG4gICQoJy53b3JrX19jdGEtdGl0bGUnKS5hZGRDbGFzcygnd29ya19fY3RhLXRpdGxlLS1ubycpO1xuICAkKCcuY29tcGV0ZW5jZV9fY29udGVudCcpLmFkZENsYXNzKCdjb21wZXRlbmNlX19jb250ZW50LS1ubycpO1xufVxuXG4vLyBSYW5raW5nIHdpZGdldCBjYXJvdXNlbCBpbml0aWFsaXphdGlvblxudmFyIG93bCA9ICQoJyNyYW5raW5nJyk7XG52YXIgZm9ybSA9ICQoJyNmb3JtUmFua2luZycpO1xuXG5maWxsSW5Pd2xJbml0KG93bCwgJy5yYW5raW5nJywgdHJ1ZSwgNCwgNCwgNywgMTAsICcwLCAxMTAsIDI1MCcsIDUsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIHRydWUsIDIwMDAsIGZhbHNlLCA1KTtcbmZpbGxJbk93bEluaXQoZm9ybSwgJy5yYW5raW5nLWZvcm0nLCBmYWxzZSwgNCwgMiwgMywgNiwgJzI1NSwgMjU1LCAyNTUnLCAxMCwgdHJ1ZSwgZmFsc2UsIGZhbHNlLCB0cnVlLCAyMDAwLCB0cnVlLCA5KTtcblxuZnVuY3Rpb24gZmlsbEluT3dsSW5pdChvd2wsIHNsaWRlckNvbnRhaW5lciwgYXV0b3BsYXksIGl0ZW1zLCBpdGVtc01vYmlsZSwgaXRlbXNUYWJsZXQsIHNwZWVkLCBjb2xvciwgbWFyZ2luLCBmb3JtLCBuYXYsIGxvb3AsIGRvdCwgYXV0b3BsYXlUaW1lb3V0TW9iaWxlLCBkb3RNb2JpbGUpIHtcbiAgdmFyIGRvdHMgPSB2b2lkIDAsXG4gICAgICB3aWR0aCA9IDAsXG4gICAgICBvcGFjaXR5ID0gMSxcbiAgICAgIHdpZHRoQW5pbSA9IFtdO1xuXG4gIGlmIChvd2wubGVuZ3RoID4gMCkge1xuICAgIG93bC5vd2xDYXJvdXNlbCh7XG4gICAgICBsb29wOiBsb29wLFxuICAgICAgbGF6eUxvYWQ6IHRydWUsXG4gICAgICBtYXJnaW46IG1hcmdpbixcbiAgICAgIG5hdjogbmF2LFxuICAgICAgaXRlbXM6IGl0ZW1zLFxuICAgICAgZG90czogZG90LFxuICAgICAgYXV0b3BsYXk6IGF1dG9wbGF5LFxuICAgICAgYXV0b3BsYXlUaW1lb3V0OiA3MDAwLFxuICAgICAgYXV0b3BsYXlTcGVlZDogMjAwMCxcbiAgICAgIHNtYXJ0U3BlZWQ6IDYwMCxcbiAgICAgIG9uSW5pdGlhbGl6ZWQ6IG93bEluaXRGdW5jdGlvbixcbiAgICAgIG9uQ2hhbmdlOiBvd2xDaGFuZ2VkRnVuY3Rpb24sXG4gICAgICBvbkNoYW5nZWQ6IG93bEluaXRGdW5jdGlvbixcbiAgICAgIHJlc3BvbnNpdmU6IHtcbiAgICAgICAgMDoge1xuICAgICAgICAgIGl0ZW1zOiBmb3JtID8gMiA6IDEsXG4gICAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICAgIGRvdHM6IGRvdE1vYmlsZSxcbiAgICAgICAgICBuYXY6IGZhbHNlLFxuICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLFxuICAgICAgICAgIGF1dG9wbGF5VGltZW91dDogYXV0b3BsYXlUaW1lb3V0TW9iaWxlXG4gICAgICAgIH0sXG4gICAgICAgIDYwMDoge1xuICAgICAgICAgIGl0ZW1zOiBmb3JtID8gaXRlbXNUYWJsZXQgOiBpdGVtc01vYmlsZSxcbiAgICAgICAgICBtYXJnaW46IGZvcm0gPyAyNSA6IG1hcmdpblxuICAgICAgICB9LFxuICAgICAgICAxMDAwOiB7XG4gICAgICAgICAgaXRlbXM6IGl0ZW1zVGFibGV0LFxuICAgICAgICAgIG1hcmdpbjogZm9ybSA/IDI1IDogbWFyZ2luXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG93bEluaXRGdW5jdGlvbigpIHtcbiAgICBkb3RzID0gJChzbGlkZXJDb250YWluZXIgKyAnIC5vd2wtZG90Jyk7XG4gICAgaWYgKGRvdHMubGVuZ3RoICYmICFuYXYpIHtcbiAgICAgIHN0ZXAoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvd2xDaGFuZ2VkRnVuY3Rpb24ocHJvcCkge1xuICAgIGlmIChwcm9wLnByb3BlcnR5Lm5hbWUgPT09ICdwb3NpdGlvbicpIHtcbiAgICAgIHdpZHRoID0gNTA7XG4gICAgfVxuICAgIGRvdHMuZmluZCgnc3BhbicpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgd2lkdGggPSAwO1xuICAgIG9wYWNpdHkgPSAxO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RlcCgpIHtcbiAgICB2YXIgaW5jcmVtZW50ID0gNTAgLyAoc3BlZWQgKiA2MCk7XG4gICAgdmFyIGRlY3JlbWVudCA9IDEgLyAoc3BlZWQgKiA2MCk7XG4gICAgd2lkdGggKz0gaW5jcmVtZW50O1xuICAgIG9wYWNpdHkgLT0gZGVjcmVtZW50O1xuICAgICQoZG90c1tnZXRQcmV2SXRlbSgpXSkuZmluZCgnc3BhbicpLmNzcyh7XG4gICAgICAnYm9yZGVyLWNvbG9yJzogJ3JnYmEoJyArIGNvbG9yICsgJywgJyArIG9wYWNpdHkgKyAnKSdcbiAgICB9KTtcbiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPD0gNTk5KSB7XG4gICAgICAkKGRvdHNbZ2V0TmV4dEl0ZW0oKV0pLmZpbmQoJ3NwYW4nKS5jc3Moe1xuICAgICAgICAnYm9yZGVyLWxlZnQnOiAnc29saWQgJyArIHdpZHRoIC8gMiArICdweCByZ2JhKCcgKyBjb2xvciArICcsIDEpJ1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoZG90c1tnZXROZXh0SXRlbSgpXSkuZmluZCgnc3BhbicpLmNzcyh7XG4gICAgICAgICdib3JkZXItbGVmdCc6ICdzb2xpZCAnICsgd2lkdGggKyAncHggcmdiYSgnICsgY29sb3IgKyAnLCAxKSdcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh3aWR0aCA8IDUwKSB7XG4gICAgICB3aWR0aEFuaW0ucHVzaChyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNldFN0eWxlcygpO1xuICAgICAgZG90c1tnZXROZXh0SXRlbSgpXS5jbGljaygpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0U3R5bGVzKCkge1xuICAgIHdpZHRoID0gMDtcbiAgICBvcGFjaXR5ID0gMTtcbiAgICAkKGRvdHNbZ2V0UHJldkl0ZW0oKV0pLmZpbmQoJ3NwYW4nKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICQoZG90c1tnZXROZXh0SXRlbSgpXSkuZmluZCgnc3BhbicpLmNzcyh7XG4gICAgICAnYm9yZGVyLWxlZnQnOiAnJ1xuICAgIH0pO1xuICAgIGRvdHMub25lKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHdpZHRoQW5pbS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGl0ZW0pO1xuICAgICAgfSk7XG4gICAgICB3aWR0aEFuaW0gPSBbXTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldE5leHRJdGVtKCkge1xuICAgIHZhciBuZXh0SXRlbUluZGV4ID0gMDtcbiAgICAkLmVhY2goZG90cywgZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XG4gICAgICBpZiAoJChpdGVtKS5oYXNDbGFzcygnYWN0aXZlJykgJiYgaW5kZXggPCBkb3RzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgbmV4dEl0ZW1JbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBuZXh0SXRlbUluZGV4O1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UHJldkl0ZW0oKSB7XG4gICAgdmFyIHByZXZJdGVtID0gZG90cy5sZW5ndGggLSAxO1xuICAgICQuZWFjaChkb3RzLCBmdW5jdGlvbiAoaW5kZXgsIGl0ZW0pIHtcbiAgICAgIGlmICgkKGl0ZW0pLmhhc0NsYXNzKCdhY3RpdmUnKSAmJiBpbmRleCA8IGRvdHMubGVuZ3RoIC0gMSkge1xuICAgICAgICBwcmV2SXRlbSA9IGluZGV4O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHByZXZJdGVtO1xuICB9XG59XG5cbiQudmFsaWRhdG9yLm1ldGhvZHMubnVtYmVyID0gZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XG4gIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IC9eWzAtOStcXC0oKSDigJRdKyQvLnRlc3QodmFsdWUpO1xufTtcblxudmFyIGhpZGUgPSBmdW5jdGlvbiBoaWRlKGVsZW0pIHtcbiAgcmV0dXJuIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbn07XG5cbiQoJ2Zvcm0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgJCh0aGlzKS52YWxpZGF0ZSh7XG4gICAgc2hvd0Vycm9yczogZnVuY3Rpb24gc2hvd0Vycm9ycyhlcnJvck1hcCwgZXJyb3JMaXN0KSB7XG4gICAgICBpZiAoZXJyb3JNYXBbJ2F0dGFjaCddKSBOb3RpZnkodXBsb2FkRXJyb3JNZXNzYWdlLCBub3RpZnlEZWxheSk7XG4gICAgICB0aGlzLmRlZmF1bHRTaG93RXJyb3JzKCk7XG4gICAgfSxcbiAgICBydWxlczoge1xuICAgICAgbmFtZToge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbWF4bGVuZ3RoOiAyNTVcbiAgICAgIH0sXG4gICAgICBsYXN0X25hbWU6IHtcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIG1heGxlbmd0aDogMjU1XG4gICAgICB9LFxuICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIG1heGxlbmd0aDogMjU1XG4gICAgICB9LFxuICAgICAgY29tcGFueToge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbWF4bGVuZ3RoOiAyNTVcbiAgICAgIH0sXG4gICAgICBlbWFpbDoge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgIG1heGxlbmd0aDogMjU1XG4gICAgICB9LFxuICAgICAgcGhvbmU6IHtcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogdHJ1ZSxcbiAgICAgICAgbWF4bGVuZ3RoOiAyNTUsXG4gICAgICAgIG1pbmxlbmd0aDogNVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgbWF4bGVuZ3RoOiA2NTUzNVxuICAgICAgfVxuICAgIH0sXG4gICAgbWVzc2FnZXM6IHtcbiAgICAgIGVtYWlsOiB7XG4gICAgICAgIGVtYWlsOiAnUGxlYXNlIGVudGVyIGEgdmFsaWQgZW1haWwgYWRkcmVzcy4nXG4gICAgICB9XG4gICAgfSxcbiAgICBzdWJtaXRIYW5kbGVyOiBmdW5jdGlvbiBzdWJtaXRIYW5kbGVyKGZvcm0sIGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyIHJvd0RhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XG4gICAgICB2YXIgdXJsID0gZm9ybS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXJsJyk7XG4gICAgICB2YXIgY29udGFjdEVycm9yTWVzc2FnZSA9IGZvcm0ucXVlcnlTZWxlY3RvcignLnJlZ2lzdHJhdGlvbl9fZXJyb3InKTtcbiAgICAgIHZhciB0aHhNZXNzYWdlID0gZm9ybS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICByb3dEYXRhLmFwcGVuZCgnaGFuZGxlcl9pZCcsIGZvcm0uZGF0YXNldC5oYW5kbGVyKTtcblxuICAgICAgaGFuZGxlRm9ybVN1Ym1pdCh1cmwsIHJvd0RhdGEsIHtcbiAgICAgICAgdHlwZTogZm9ybS5kYXRhc2V0LnR5cGVcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzKSB7XG4gICAgICAgICAgJCgnLm5vdGlmaWNhdGlvbicpLnNob3coKTtcbiAgICAgICAgICAkKFwiZm9ybVwiKS50cmlnZ2VyKFwicmVzZXRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udGFjdEVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9ICdDaGVjayBzZWxlY3RlZCBmaWVsZHMsIHBsZWFzZS4nO1xuICAgICAgICAgIHNob3coY29udGFjdEVycm9yTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMocmVzLmRhdGEpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyhyZXMuZGF0YSkubWFwKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgdmFyIGlucHV0TmFtZSA9IGVycm9yLnNwbGl0KCctJylbMV07XG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbmFtZT0nICsgaW5wdXROYW1lICsgJ10nKTtcblxuICAgICAgICAgICAgcmV0dXJuIGlucHV0LmNsYXNzTGlzdC5hZGQoJ2hhcy1lcnJvcicpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn0pOyJdfQ==
