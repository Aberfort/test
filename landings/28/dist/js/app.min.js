"use strict";function Notify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Default message",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,a=document.querySelector(".notify"),o=document.createElement("div"),n=document.createTextNode(e),r=document.body;return a&&r.removeChild(a),o.classList.add("notify"),o.addEventListener("click",function(e){return e.target.style.opacity=0}),o.appendChild(n),setTimeout(function(){o.style.opacity=1,o.style.transform="translateY(0)"},300),setTimeout(function(){o.style.opacity=0,o.style.transform="translateY(200%)"},t),r.appendChild(o)}$(document).ready(function(){$(".video-play").vide("/static/7/images/video/video",{posterType:"jpg",className:"video-container"})}),$(".clients__container").owlCarousel({loop:!0,dots:!1,nav:!0,navText:["",""],autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,margin:10,responsive:{0:{items:1},768:{items:2,autoWidth:!0},1020:{items:3,autoWidth:!0},1280:{items:4}}}),$(".about__awards").owlCarousel({loop:!0,dots:!1,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0,nav:!0,navText:["",""],responsive:{0:{items:1},768:{items:3},1250:{items:4}}}),AOS.init();var newsletter=document.querySelector(".newsletter"),newsletterOk=document.querySelectorAll(".popup-ok"),docHeight=document.querySelector("body").offsetHeight,triggerHeight=.75*docHeight-window.innerHeight,newsLetterKey="isNewsletter",twoWeeks=12096e5,dateNow=Date.now(),newsLetterShown={date:dateNow+twoWeeks,shown:!0};function showNewsletterPopup(){var e=JSON.parse(localStorage.getItem(newsLetterKey));if(!e||e.date<dateNow)return newsletter&&newsletter.classList.add("newsletter--show")}if(newsletterOk&&[].forEach.call(newsletterOk,function(e){e.addEventListener("click",function(){newsletter.classList.remove("newsletter--show"),localStorage.setItem(newsLetterKey,JSON.stringify(newsLetterShown))})}),window.addEventListener("scroll",function(){window.scrollY>triggerHeight&&showNewsletterPopup()}),$(document).on("click",'a[href^="#"]',function(e){e.preventDefault(),$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top},500)}),$(".footer__year").length){var currentYear=(new Date).getFullYear();$(".footer__year").text(currentYear)}$('html[lang="no"]').length&&($(".work__cta").addClass("work__cta--no"),$(".work__cta-title").addClass("work__cta-title--no"),$(".competence__content").addClass("competence__content--no"));var owl=$("#ranking"),form=$("#formRanking");function fillInOwlInit(e,t,a,o,n,r,i,l,s,c,d,u,m,f,h){var p=void 0,g=0,y=1,v=[];function w(){(p=$(t+" .owl-dot")).length&&!d&&S()}function S(){g+=50/(60*i),y-=1/(60*i),$(p[b()]).find("span").css({"border-color":"rgba("+l+", "+y+")"}),window.innerWidth<=599?$(p[k()]).find("span").css({"border-left":"solid "+g/2+"px rgba("+l+", 1)"}):$(p[k()]).find("span").css({"border-left":"solid "+g+"px rgba("+l+", 1)"}),g<50?v.push(requestAnimationFrame(S)):(g=0,y=1,$(p[b()]).find("span").removeAttr("style"),$(p[k()]).find("span").css({"border-left":""}),p.one("click",function(){v.forEach(function(e){cancelAnimationFrame(e)}),v=[]}),p[k()].click())}function k(){var e=0;return $.each(p,function(t,a){$(a).hasClass("active")&&t<p.length-1&&(e=t+1)}),e}function b(){var e=p.length-1;return $.each(p,function(t,a){$(a).hasClass("active")&&t<p.length-1&&(e=t)}),e}e.length>0&&e.owlCarousel({loop:u,lazyLoad:!0,margin:s,nav:d,items:o,dots:m,autoplay:a,autoplayTimeout:7e3,autoplaySpeed:2e3,smartSpeed:600,onInitialized:w,onChange:function(e){"position"===e.property.name&&(g=50);p.find("span").removeAttr("style"),g=0,y=1},onChanged:w,responsive:{0:{items:c?2:1,margin:0,dots:h,nav:!1,loop:!0,autoplay:!1,autoplayTimeout:f},600:{items:c?r:n,margin:c?25:s},1e3:{items:r,margin:c?25:s}}})}fillInOwlInit(owl,".ranking",!0,4,4,7,10,"0, 110, 250",5,!1,!1,!1,!0,2e3,!1,5),fillInOwlInit(form,".ranking-form",!1,4,2,3,6,"255, 255, 255",10,!0,!1,!1,!0,2e3,!0,9);var isoft="isoft",clearDelay=9e5,ndaCheckbox=document.querySelector("#send_nda"),formWrap=document.querySelector(".form-wrap"),formWrapBackground=formWrap&&window.getComputedStyle(formWrap).getPropertyValue("background-image"),thxMessages=[].slice.apply(document.querySelectorAll(".js-thx")),uploadErrorMessage="You can upload doc, docx, pdf, odt, ott, txt files under 25mb.",notifyDelay=1e4;function Notify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Default message",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,a=document.querySelector(".notify"),o=document.createElement("div"),n=document.createTextNode(e),r=document.body;return a&&r.removeChild(a),o.classList.add("notify"),o.addEventListener("click",function(e){return e.target.style.opacity=0}),o.appendChild(n),setTimeout(function(){o.style.opacity=1,o.style.transform="translateY(0)"},300),setTimeout(function(){o.style.opacity=0,o.style.transform="translateY(200%)"},t),r.appendChild(o)}"none"!==formWrapBackground&&thxMessages.forEach(function(e){return e.classList.add("text-white")}),ndaCheckbox&&ndaCheckbox.addEventListener("click",function(e){"1"===e.target.value?e.target.value="0":e.target.value="1"}),$.validator.methods.number=function(e,t){return this.optional(t)||/^[0-9+\-() â€”]+$/.test(e)},$.validator.addMethod("filesize",function(e,t,a){return this.optional(t)||t.files[0].size<=a});var hide=function(e){return e?e.style.display="none":null},show=function(e){return e?e.style.display="block":null};function checkStorage(e,t){var a=(new Date).getTime(),o=checkKeyInStorage(e)?checkKeyInStorage(e).time:null;(o&&o+t-a)<=0&&(isLocalStorageAvailable()&&localStorage.removeItem(e),showMessageIfWeKnowUser(e))}function checkKeyInStorage(e){if(isLocalStorageAvailable())return JSON.parse(localStorage.getItem(e))}function hideFormTitle(){var e=document.querySelector("#formBottom");checkKeyInStorage(isoft)&&e&&(e.style.display="none")}function showMessageIfWeKnowUser(e){var t=document.querySelector(".thank"),a=document.querySelector("#form-contacts");checkKeyInStorage(e)||(t&&(t.style.display="none"),a&&(a.style.display="flex"))}$("form").each(function(){$(this).validate({errorClass:"has-error",validClass:"has-success",showErrors:function(e,t){e.attach&&Notify(uploadErrorMessage,notifyDelay),this.defaultShowErrors()},highlight:function(e,t,a){$(e).parent().addClass(t).removeClass(a)},unhighlight:function(e,t,a){$(e).parent().removeClass(t).addClass(a)},rules:{name:{required:!1,maxlength:255},last_name:{required:!0,maxlength:255},phone:{required:!0,number:!0,maxlength:255,minlength:5},company:{required:!0,maxlength:255},position:{required:!0,maxlength:255},country:{required:!0},size:{required:!0},email:{required:{depends:function(){return $(this).val($.trim($(this).val())),!0}},email:!0,maxlength:255},description:{required:!0,maxlength:65535},attach:{extension:"doc|docx|pdf|odt|ott|txt",filesize:25e6}},messages:{email:{email:"Please enter a valid email address."},attach:{filesize:"File should be less than 25mb"}},submitHandler:function(e){var t=e.querySelector("#attach");t&&0===t.files.length&&t.remove();var a=new FormData(e),o=e.getAttribute("data-url"),n=e.querySelector(".contact__error"),r=e.nextElementSibling,i=e.querySelector(".form-spinner"),l=e.querySelector(".form__submit");a.append("handler_id",e.dataset.handler),i&&i.classList.add("js-show"),"form-contacts"===e.getAttribute("id")&&(hide(l),isLocalStorageAvailable()&&localStorage.setItem(isoft,JSON.stringify({time:(new Date).getTime()}))),window.handleFormSubmit(o,a,{type:e.dataset.type}).then(function(t){t.data.status?(hide(e),show(r),$("#pined-form-main-tokenization")[0]&&window.dataLayer.push({event:"RegisterFormSubmit"})):Object.keys(t.data).length>=1?Object.keys(t.data).map(function(e){var t=e.split("-")[1],a=document.querySelector("[name="+t+"]");a&&a.parentElement}):(n.textContent="Check selected fields, please.",show(n)),i&&i.classList.remove("js-show"),show(l)}).catch(function(e){show(n),show(l),i&&i.classList.remove("js-show"),console.log(e)})}})}),checkStorage(isoft,clearDelay),hideFormTitle();var fileInput=document.querySelector("input[type=file]"),clearAttach=document.querySelector(".clear-attach");function isLocalStorageAvailable(){try{window.localStorage}catch(e){return!1}return!0}fileInput&&fileInput.addEventListener("change",function(e){var t=e.target.value.split("\\").pop(),a=e.target.parentElement.querySelector(".upload__label");t.length>=15&&(t=t.slice(0,5)+"..."+t.slice(-5)),a.querySelector("span").innerHTML=t||e.target.dataset.label,clearAttach.style.display="block"}),clearAttach&&clearAttach.addEventListener("click",function(e){e.preventDefault(),fileInput.value="",document.querySelector(".uploaded__text").innerHTML='<i class="isoi-paper-clip"></i>Attach file',clearAttach.style.display="none"});var clearStorage=document.querySelector("#clearStorage");clearStorage&&clearStorage.addEventListener("click",function(e){e.preventDefault(),isLocalStorageAvailable()&&localStorage.clear(),location.reload()}),function(){window.onload=function(){var e;(e=document.querySelector(".check-browse"))&&(!0===window.checkBrowse?e.value=0:e.value=1)}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiTm90aWZ5IiwibWVzc2FnZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImRlbGF5IiwiZXhpc3RpbmdOb3RpZnkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ3cmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsInRleHROb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJib2R5IiwicmVtb3ZlQ2hpbGQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsInN0eWxlIiwib3BhY2l0eSIsImFwcGVuZENoaWxkIiwic2V0VGltZW91dCIsInRyYW5zZm9ybSIsIiQiLCJyZWFkeSIsInZpZGUiLCJwb3N0ZXJUeXBlIiwiY2xhc3NOYW1lIiwib3dsQ2Fyb3VzZWwiLCJsb29wIiwiZG90cyIsIm5hdiIsIm5hdlRleHQiLCJhdXRvcGxheSIsImF1dG9wbGF5VGltZW91dCIsImF1dG9wbGF5SG92ZXJQYXVzZSIsIm1hcmdpbiIsInJlc3BvbnNpdmUiLCIwIiwiaXRlbXMiLCI3NjgiLCJhdXRvV2lkdGgiLCIxMDIwIiwiMTI4MCIsIjEyNTAiLCJBT1MiLCJpbml0IiwibmV3c2xldHRlciIsIm5ld3NsZXR0ZXJPayIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkb2NIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJ0cmlnZ2VySGVpZ2h0Iiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJuZXdzTGV0dGVyS2V5IiwidHdvV2Vla3MiLCJkYXRlTm93IiwiRGF0ZSIsIm5vdyIsIm5ld3NMZXR0ZXJTaG93biIsImRhdGUiLCJzaG93biIsInNob3dOZXdzbGV0dGVyUG9wdXAiLCJpc05ld3NMZXR0ZXIiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZm9yRWFjaCIsImNhbGwiLCJpdGVtIiwicmVtb3ZlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInNjcm9sbFkiLCJvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiYXR0ciIsInRoaXMiLCJvZmZzZXQiLCJ0b3AiLCJjdXJyZW50WWVhciIsImdldEZ1bGxZZWFyIiwidGV4dCIsImFkZENsYXNzIiwib3dsIiwiZm9ybSIsImZpbGxJbk93bEluaXQiLCJzbGlkZXJDb250YWluZXIiLCJpdGVtc01vYmlsZSIsIml0ZW1zVGFibGV0Iiwic3BlZWQiLCJjb2xvciIsImRvdCIsImF1dG9wbGF5VGltZW91dE1vYmlsZSIsImRvdE1vYmlsZSIsIndpZHRoIiwid2lkdGhBbmltIiwib3dsSW5pdEZ1bmN0aW9uIiwic3RlcCIsImdldFByZXZJdGVtIiwiZmluZCIsImNzcyIsImJvcmRlci1jb2xvciIsImlubmVyV2lkdGgiLCJnZXROZXh0SXRlbSIsImJvcmRlci1sZWZ0IiwicHVzaCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInJlbW92ZUF0dHIiLCJvbmUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImNsaWNrIiwibmV4dEl0ZW1JbmRleCIsImVhY2giLCJpbmRleCIsImhhc0NsYXNzIiwicHJldkl0ZW0iLCJsYXp5TG9hZCIsImF1dG9wbGF5U3BlZWQiLCJzbWFydFNwZWVkIiwib25Jbml0aWFsaXplZCIsIm9uQ2hhbmdlIiwicHJvcCIsInByb3BlcnR5IiwibmFtZSIsIm9uQ2hhbmdlZCIsIjYwMCIsIjEwMDAiLCJpc29mdCIsImNsZWFyRGVsYXkiLCJuZGFDaGVja2JveCIsImZvcm1XcmFwIiwiZm9ybVdyYXBCYWNrZ3JvdW5kIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJ0aHhNZXNzYWdlcyIsInNsaWNlIiwiYXBwbHkiLCJ1cGxvYWRFcnJvck1lc3NhZ2UiLCJub3RpZnlEZWxheSIsInZhbHVlIiwidmFsaWRhdG9yIiwibWV0aG9kcyIsIm51bWJlciIsImVsZW1lbnQiLCJvcHRpb25hbCIsInRlc3QiLCJhZGRNZXRob2QiLCJwYXJhbSIsImZpbGVzIiwic2l6ZSIsImhpZGUiLCJlbGVtIiwiZGlzcGxheSIsInNob3ciLCJjaGVja1N0b3JhZ2UiLCJrZXkiLCJjdXJyZW50VGltZSIsImdldFRpbWUiLCJ1c2VyVGltZSIsImNoZWNrS2V5SW5TdG9yYWdlIiwidGltZSIsImlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlIiwicmVtb3ZlSXRlbSIsInNob3dNZXNzYWdlSWZXZUtub3dVc2VyIiwiaGlkZUZvcm1UaXRsZSIsInRpdGxlIiwidmFsaWRhdGUiLCJlcnJvckNsYXNzIiwidmFsaWRDbGFzcyIsInNob3dFcnJvcnMiLCJlcnJvck1hcCIsImVycm9yTGlzdCIsImRlZmF1bHRTaG93RXJyb3JzIiwiaGlnaGxpZ2h0IiwicGFyZW50IiwicmVtb3ZlQ2xhc3MiLCJ1bmhpZ2hsaWdodCIsInJ1bGVzIiwicmVxdWlyZWQiLCJtYXhsZW5ndGgiLCJsYXN0X25hbWUiLCJwaG9uZSIsIm1pbmxlbmd0aCIsImNvbXBhbnkiLCJwb3NpdGlvbiIsImNvdW50cnkiLCJlbWFpbCIsImRlcGVuZHMiLCJ2YWwiLCJ0cmltIiwiZGVzY3JpcHRpb24iLCJhdHRhY2giLCJleHRlbnNpb24iLCJmaWxlc2l6ZSIsIm1lc3NhZ2VzIiwic3VibWl0SGFuZGxlciIsImZpbGVJbnB1dCIsInJvd0RhdGEiLCJGb3JtRGF0YSIsInVybCIsImdldEF0dHJpYnV0ZSIsImNvbnRhY3RFcnJvck1lc3NhZ2UiLCJ0aHhNZXNzYWdlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwic3Bpbm5lciIsInN1Ym1pdEJ1dHRvbiIsImFwcGVuZCIsImRhdGFzZXQiLCJoYW5kbGVyIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInR5cGUiLCJ0aGVuIiwicmVzIiwiZGF0YSIsInN0YXR1cyIsImRhdGFMYXllciIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJlcnJvciIsImlucHV0TmFtZSIsInNwbGl0IiwiaW5wdXRFbG0iLCJwYXJlbnRFbGVtZW50IiwidGV4dENvbnRlbnQiLCJjYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJjbGVhckF0dGFjaCIsImVyciIsImZpbGVOYW1lIiwicG9wIiwibGFiZWwiLCJpbm5lckhUTUwiLCJjbGVhclN0b3JhZ2UiLCJjbGVhciIsImxvY2F0aW9uIiwicmVsb2FkIiwib25sb2FkIiwiZmllbGRBZEJsb2NrIiwiY2hlY2tCcm93c2UiXSwibWFwcGluZ3MiOiJBQUFBLGFBb0VBLFNBQUFBLFNBQ0EsSUFBQUMsRUFBQUMsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBQSxrQkFDQUcsRUFBQUgsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBQSxJQUVBSSxFQUFBQyxTQUFBQyxjQUFBLFdBQ0FDLEVBQUFGLFNBQUFHLGNBQUEsT0FDQUMsRUFBQUosU0FBQUssZUFBQVgsR0FDQVksRUFBQU4sU0FBQU0sS0FvQkEsT0FsQkFQLEdBQUFPLEVBQUFDLFlBQUFSLEdBRUFHLEVBQUFNLFVBQUFDLElBQUEsVUFDQVAsRUFBQVEsaUJBQUEsUUFBQSxTQUFBQyxHQUNBLE9BQUFBLEVBQUFDLE9BQUFDLE1BQUFDLFFBQUEsSUFFQVosRUFBQWEsWUFBQVgsR0FFQVksV0FBQSxXQUNBZCxFQUFBVyxNQUFBQyxRQUFBLEVBQ0FaLEVBQUFXLE1BQUFJLFVBQUEsaUJBQ0EsS0FFQUQsV0FBQSxXQUNBZCxFQUFBVyxNQUFBQyxRQUFBLEVBQ0FaLEVBQUFXLE1BQUFJLFVBQUEsb0JBQ0FuQixHQUVBUSxFQUFBUyxZQUFBYixHQTdGQWdCLEVBQUFsQixVQUFBbUIsTUFBQSxXQVFBRCxFQUFBLGVBQUFFLEtBQUEsZ0NBQ0FDLFdBQUEsTUFDQUMsVUFBQSxzQkFLQUosRUFBQSx1QkFBQUssYUFDQUMsTUFBQSxFQUNBQyxNQUFBLEVBQ0FDLEtBQUEsRUFDQUMsU0FBQSxHQUFBLElBQ0FDLFVBQUEsRUFDQUMsZ0JBQUEsSUFDQUMsb0JBQUEsRUFDQUMsT0FBQSxHQUNBQyxZQUNBQyxHQUNBQyxNQUFBLEdBRUFDLEtBQ0FELE1BQUEsRUFDQUUsV0FBQSxHQUVBQyxNQUNBSCxNQUFB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Z0ksTUFBQWtGLE1BQUEsTUFBQVUsTUFDQUMsRUFBQTlOLEVBQUFDLE9BQUFvTixjQUFBL04sY0FBQSxrQkFHQXNPLEVBQUEzTyxRQUZBLEtBR0EyTyxFQUFBQSxFQUFBL0YsTUFBQSxFQUFBLEdBQUEsTUFBQStGLEVBQUEvRixPQUFBLElBR0FpRyxFQUFBeE8sY0FBQSxRQUFBeU8sVUFBQUgsR0FBQTVOLEVBQUFDLE9BQUFvTSxRQUFBeUIsTUFFQUosWUFBQXhOLE1BQUE0SSxRQUFBLFVBR0E0RSxhQUFBQSxZQUFBM04saUJBQUEsUUFBQSxTQUFBQyxHQUNBQSxFQUFBOEQsaUJBQ0E0SCxVQUFBekQsTUFBQSxHQUNBNUksU0FBQUMsY0FBQSxtQkFDQXlPLFVBQUEsNkNBQ0FMLFlBQUF4TixNQUFBNEksUUFBQSxTQWFBLElBQUFrRixhQUFBM08sU0FBQUMsY0FBQSxpQkFFQTBPLGNBQUFBLGFBQUFqTyxpQkFBQSxRQUFBLFNBQUFDLEdBQ0FBLEVBQUE4RCxpQkFDQXlGLDJCQUNBcEcsYUFBQThLLFFBRUFDLFNBQUFDLFdBR0EsV0FDQTlMLE9BQUErTCxPQUFBLFdBSUEsSUFDQUMsR0FBQUEsRUFBQWhQLFNBQUFDLGNBQUEscUJBR0EsSUFBQStDLE9BQUFpTSxZQUNBRCxFQUFBcEcsTUFBQSxFQUVBb0csRUFBQXBHLE1BQUEsSUFaQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblxuICBcInVzZSBzdHJpY3RcIjtcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAvKlx0VmlkZW8gQmFja2dyb3VuZFxuICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAkKCcudmlkZW8tcGxheScpLnZpZGUoXCIvc3RhdGljLzcvaW1hZ2VzL3ZpZGVvL3ZpZGVvXCIsIHtcbiAgICBwb3N0ZXJUeXBlOiBcImpwZ1wiLFxuICAgIGNsYXNzTmFtZTogJ3ZpZGVvLWNvbnRhaW5lcidcbiAgfSk7XG59KTtcblxuLy8gQ2xpZW50cyBzZWN0aW9uXG4kKCcuY2xpZW50c19fY29udGFpbmVyJykub3dsQ2Fyb3VzZWwoe1xuICBsb29wOiB0cnVlLFxuICBkb3RzOiBmYWxzZSxcbiAgbmF2OiB0cnVlLFxuICBuYXZUZXh0OiBbXCJcIiwgXCJcIl0sXG4gIGF1dG9wbGF5OiB0cnVlLFxuICBhdXRvcGxheVRpbWVvdXQ6IDMwMDAsXG4gIGF1dG9wbGF5SG92ZXJQYXVzZTogdHJ1ZSxcbiAgbWFyZ2luOiAxMCxcbiAgcmVzcG9uc2l2ZToge1xuICAgIDA6IHtcbiAgICAgIGl0ZW1zOiAxXG4gICAgfSxcbiAgICA3Njg6IHtcbiAgICAgIGl0ZW1zOiAyLFxuICAgICAgYXV0b1dpZHRoOiB0cnVlXG4gICAgfSxcbiAgICAxMDIwOiB7XG4gICAgICBpdGVtczogMyxcbiAgICAgIGF1dG9XaWR0aDogdHJ1ZVxuICAgIH0sXG4gICAgMTI4MDoge1xuICAgICAgaXRlbXM6IDRcbiAgICB9XG4gIH1cbn0pO1xuXG4vLyBBd2FyZHMgc2VjdGlvblxuJCgnLmFib3V0X19hd2FyZHMnKS5vd2xDYXJvdXNlbCh7XG4gIGxvb3A6IHRydWUsXG4gIGRvdHM6IGZhbHNlLFxuICBhdXRvcGxheTogdHJ1ZSxcbiAgYXV0b3BsYXlUaW1lb3V0OiAzMDAwLFxuICBhdXRvcGxheUhvdmVyUGF1c2U6IHRydWUsXG4gIG5hdjogdHJ1ZSxcbiAgbmF2VGV4dDogW1wiXCIsIFwiXCJdLFxuICByZXNwb25zaXZlOiB7XG4gICAgMDoge1xuICAgICAgaXRlbXM6IDFcbiAgICB9LFxuICAgIDc2ODoge1xuICAgICAgaXRlbXM6IDNcbiAgICB9LFxuICAgIDEyNTA6IHtcbiAgICAgIGl0ZW1zOiA0XG4gICAgfVxuICB9XG59KTtcblxuQU9TLmluaXQoKTtcblxuZnVuY3Rpb24gTm90aWZ5KCkge1xuICB2YXIgbWVzc2FnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ0RlZmF1bHQgbWVzc2FnZSc7XG4gIHZhciBkZWxheSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMzAwMDtcblxuICB2YXIgZXhpc3RpbmdOb3RpZnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm90aWZ5Jyk7XG4gIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHZhciB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG1lc3NhZ2UpO1xuICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cbiAgaWYgKGV4aXN0aW5nTm90aWZ5KSBib2R5LnJlbW92ZUNoaWxkKGV4aXN0aW5nTm90aWZ5KTtcblxuICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ25vdGlmeScpO1xuICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICByZXR1cm4gZS50YXJnZXQuc3R5bGUub3BhY2l0eSA9IDA7XG4gIH0pO1xuICB3cmFwcGVyLmFwcGVuZENoaWxkKHRleHROb2RlKTtcblxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICB3cmFwcGVyLnN0eWxlLm9wYWNpdHkgPSAxO1xuICAgIHdyYXBwZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCknO1xuICB9LCAzMDApO1xuXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIHdyYXBwZXIuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgd3JhcHBlci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgyMDAlKSc7XG4gIH0sIGRlbGF5KTtcblxuICByZXR1cm4gYm9keS5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcbn1cblxudmFyIG5ld3NsZXR0ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3c2xldHRlcicpO1xudmFyIG5ld3NsZXR0ZXJPayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cC1vaycpO1xudmFyIGRvY0hlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5vZmZzZXRIZWlnaHQ7XG52YXIgdHJpZ2dlckhlaWdodCA9IGRvY0hlaWdodCAqIDAuNzUgLSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG52YXIgbmV3c0xldHRlcktleSA9ICdpc05ld3NsZXR0ZXInO1xudmFyIHR3b1dlZWtzID0gNyAqIDI0ICogNjAgKiA2MCAqIDEwMDAgKiAyO1xudmFyIGRhdGVOb3cgPSBEYXRlLm5vdygpO1xudmFyIG5ld3NMZXR0ZXJTaG93biA9IHtcbiAgZGF0ZTogZGF0ZU5vdyArIHR3b1dlZWtzLFxuICBzaG93bjogdHJ1ZVxufTtcblxuZnVuY3Rpb24gc2hvd05ld3NsZXR0ZXJQb3B1cCgpIHtcbiAgdmFyIGlzTmV3c0xldHRlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0obmV3c0xldHRlcktleSkpO1xuICBpZiAoIWlzTmV3c0xldHRlciB8fCBpc05ld3NMZXR0ZXIuZGF0ZSA8IGRhdGVOb3cpIHtcbiAgICByZXR1cm4gbmV3c2xldHRlciAmJiBuZXdzbGV0dGVyLmNsYXNzTGlzdC5hZGQoJ25ld3NsZXR0ZXItLXNob3cnKTtcbiAgfVxufVxuXG5uZXdzbGV0dGVyT2sgJiYgW10uZm9yRWFjaC5jYWxsKG5ld3NsZXR0ZXJPaywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBuZXdzbGV0dGVyLmNsYXNzTGlzdC5yZW1vdmUoJ25ld3NsZXR0ZXItLXNob3cnKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShuZXdzTGV0dGVyS2V5LCBKU09OLnN0cmluZ2lmeShuZXdzTGV0dGVyU2hvd24pKTtcbiAgfSk7XG59KTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNjcm9sbEhlaWdodCA9IHdpbmRvdy5zY3JvbGxZO1xuICBzY3JvbGxIZWlnaHQgPiB0cmlnZ2VySGVpZ2h0ID8gc2hvd05ld3NsZXR0ZXJQb3B1cCgpIDogJyc7XG59KTtcblxuJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ2FbaHJlZl49XCIjXCJdJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgIHNjcm9sbFRvcDogJCgkLmF0dHIodGhpcywgJ2hyZWYnKSkub2Zmc2V0KCkudG9wXG4gIH0sIDUwMCk7XG59KTtcblxuaWYgKCQoJy5mb290ZXJfX3llYXInKS5sZW5ndGgpIHtcbiAgdmFyIGN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuICAkKCcuZm9vdGVyX195ZWFyJykudGV4dChjdXJyZW50WWVhcik7XG59XG5cbmlmICgkKCdodG1sW2xhbmc9XCJub1wiXScpLmxlbmd0aCkge1xuICAkKCcud29ya19fY3RhJykuYWRkQ2xhc3MoJ3dvcmtfX2N0YS0tbm8nKTtcbiAgJCgnLndvcmtfX2N0YS10aXRsZScpLmFkZENsYXNzKCd3b3JrX19jdGEtdGl0bGUtLW5vJyk7XG4gICQoJy5jb21wZXRlbmNlX19jb250ZW50JykuYWRkQ2xhc3MoJ2NvbXBldGVuY2VfX2NvbnRlbnQtLW5vJyk7XG59XG5cbi8vIFJhbmtpbmcgd2lkZ2V0IGNhcm91c2VsIGluaXRpYWxpemF0aW9uXG52YXIgb3dsID0gJCgnI3JhbmtpbmcnKTtcbnZhciBmb3JtID0gJCgnI2Zvcm1SYW5raW5nJyk7XG5cbmZpbGxJbk93bEluaXQob3dsLCAnLnJhbmtpbmcnLCB0cnVlLCA0LCA0LCA3LCAxMCwgJzAsIDExMCwgMjUwJywgNSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgdHJ1ZSwgMjAwMCwgZmFsc2UsIDUpO1xuZmlsbEluT3dsSW5pdChmb3JtLCAnLnJhbmtpbmctZm9ybScsIGZhbHNlLCA0LCAyLCAzLCA2LCAnMjU1LCAyNTUsIDI1NScsIDEwLCB0cnVlLCBmYWxzZSwgZmFsc2UsIHRydWUsIDIwMDAsIHRydWUsIDkpO1xuXG5mdW5jdGlvbiBmaWxsSW5Pd2xJbml0KG93bCwgc2xpZGVyQ29udGFpbmVyLCBhdXRvcGxheSwgaXRlbXMsIGl0ZW1zTW9iaWxlLCBpdGVtc1RhYmxldCwgc3BlZWQsIGNvbG9yLCBtYXJnaW4sIGZvcm0sIG5hdiwgbG9vcCwgZG90LCBhdXRvcGxheVRpbWVvdXRNb2JpbGUsIGRvdE1vYmlsZSkge1xuICB2YXIgZG90cyA9IHZvaWQgMCxcbiAgICAgIHdpZHRoID0gMCxcbiAgICAgIG9wYWNpdHkgPSAxLFxuICAgICAgd2lkdGhBbmltID0gW107XG5cbiAgaWYgKG93bC5sZW5ndGggPiAwKSB7XG4gICAgb3dsLm93bENhcm91c2VsKHtcbiAgICAgIGxvb3A6IGxvb3AsXG4gICAgICBsYXp5TG9hZDogdHJ1ZSxcbiAgICAgIG1hcmdpbjogbWFyZ2luLFxuICAgICAgbmF2OiBuYXYsXG4gICAgICBpdGVtczogaXRlbXMsXG4gICAgICBkb3RzOiBkb3QsXG4gICAgICBhdXRvcGxheTogYXV0b3BsYXksXG4gICAgICBhdXRvcGxheVRpbWVvdXQ6IDcwMDAsXG4gICAgICBhdXRvcGxheVNwZWVkOiAyMDAwLFxuICAgICAgc21hcnRTcGVlZDogNjAwLFxuICAgICAgb25Jbml0aWFsaXplZDogb3dsSW5pdEZ1bmN0aW9uLFxuICAgICAgb25DaGFuZ2U6IG93bENoYW5nZWRGdW5jdGlvbixcbiAgICAgIG9uQ2hhbmdlZDogb3dsSW5pdEZ1bmN0aW9uLFxuICAgICAgcmVzcG9uc2l2ZToge1xuICAgICAgICAwOiB7XG4gICAgICAgICAgaXRlbXM6IGZvcm0gPyAyIDogMSxcbiAgICAgICAgICBtYXJnaW46IDAsXG4gICAgICAgICAgZG90czogZG90TW9iaWxlLFxuICAgICAgICAgIG5hdjogZmFsc2UsXG4gICAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgICBhdXRvcGxheTogZmFsc2UsXG4gICAgICAgICAgYXV0b3BsYXlUaW1lb3V0OiBhdXRvcGxheVRpbWVvdXRNb2JpbGVcbiAgICAgICAgfSxcbiAgICAgICAgNjAwOiB7XG4gICAgICAgICAgaXRlbXM6IGZvcm0gPyBpdGVtc1RhYmxldCA6IGl0ZW1zTW9iaWxlLFxuICAgICAgICAgIG1hcmdpbjogZm9ybSA/IDI1IDogbWFyZ2luXG4gICAgICAgIH0sXG4gICAgICAgIDEwMDA6IHtcbiAgICAgICAgICBpdGVtczogaXRlbXNUYWJsZXQsXG4gICAgICAgICAgbWFyZ2luOiBmb3JtID8gMjUgOiBtYXJnaW5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb3dsSW5pdEZ1bmN0aW9uKCkge1xuICAgIGRvdHMgPSAkKHNsaWRlckNvbnRhaW5lciArIFwiIC5vd2wtZG90XCIpO1xuICAgIGlmIChkb3RzLmxlbmd0aCAmJiAhbmF2KSB7XG4gICAgICBzdGVwKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb3dsQ2hhbmdlZEZ1bmN0aW9uKHByb3ApIHtcbiAgICBpZiAocHJvcC5wcm9wZXJ0eS5uYW1lID09PSAncG9zaXRpb24nKSB7XG4gICAgICB3aWR0aCA9IDUwO1xuICAgIH1cbiAgICBkb3RzLmZpbmQoJ3NwYW4nKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgIHdpZHRoID0gMDtcbiAgICBvcGFjaXR5ID0gMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0ZXAoKSB7XG4gICAgdmFyIGluY3JlbWVudCA9IDUwIC8gKHNwZWVkICogNjApO1xuICAgIHZhciBkZWNyZW1lbnQgPSAxIC8gKHNwZWVkICogNjApO1xuICAgIHdpZHRoICs9IGluY3JlbWVudDtcbiAgICBvcGFjaXR5IC09IGRlY3JlbWVudDtcbiAgICAkKGRvdHNbZ2V0UHJldkl0ZW0oKV0pLmZpbmQoJ3NwYW4nKS5jc3Moe1xuICAgICAgJ2JvcmRlci1jb2xvcic6IFwicmdiYShcIiArIGNvbG9yICsgXCIsIFwiICsgb3BhY2l0eSArIFwiKVwiXG4gICAgfSk7XG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDU5OSkge1xuICAgICAgJChkb3RzW2dldE5leHRJdGVtKCldKS5maW5kKCdzcGFuJykuY3NzKHtcbiAgICAgICAgJ2JvcmRlci1sZWZ0JzogXCJzb2xpZCBcIiArIHdpZHRoIC8gMiArIFwicHggcmdiYShcIiArIGNvbG9yICsgXCIsIDEpXCJcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKGRvdHNbZ2V0TmV4dEl0ZW0oKV0pLmZpbmQoJ3NwYW4nKS5jc3Moe1xuICAgICAgICAnYm9yZGVyLWxlZnQnOiBcInNvbGlkIFwiICsgd2lkdGggKyBcInB4IHJnYmEoXCIgKyBjb2xvciArIFwiLCAxKVwiXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAod2lkdGggPCA1MCkge1xuICAgICAgd2lkdGhBbmltLnB1c2gocmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzZXRTdHlsZXMoKTtcbiAgICAgIGRvdHNbZ2V0TmV4dEl0ZW0oKV0uY2xpY2soKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFN0eWxlcygpIHtcbiAgICB3aWR0aCA9IDA7XG4gICAgb3BhY2l0eSA9IDE7XG4gICAgJChkb3RzW2dldFByZXZJdGVtKCldKS5maW5kKCdzcGFuJykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAkKGRvdHNbZ2V0TmV4dEl0ZW0oKV0pLmZpbmQoJ3NwYW4nKS5jc3Moe1xuICAgICAgJ2JvcmRlci1sZWZ0JzogJydcbiAgICB9KTtcbiAgICBkb3RzLm9uZSgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICB3aWR0aEFuaW0uZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShpdGVtKTtcbiAgICAgIH0pO1xuICAgICAgd2lkdGhBbmltID0gW107XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXROZXh0SXRlbSgpIHtcbiAgICB2YXIgbmV4dEl0ZW1JbmRleCA9IDA7XG4gICAgJC5lYWNoKGRvdHMsIGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xuICAgICAgaWYgKCQoaXRlbSkuaGFzQ2xhc3MoJ2FjdGl2ZScpICYmIGluZGV4IDwgZG90cy5sZW5ndGggLSAxKSB7XG4gICAgICAgIG5leHRJdGVtSW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbmV4dEl0ZW1JbmRleDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFByZXZJdGVtKCkge1xuICAgIHZhciBwcmV2SXRlbSA9IGRvdHMubGVuZ3RoIC0gMTtcbiAgICAkLmVhY2goZG90cywgZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XG4gICAgICBpZiAoJChpdGVtKS5oYXNDbGFzcygnYWN0aXZlJykgJiYgaW5kZXggPCBkb3RzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgcHJldkl0ZW0gPSBpbmRleDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBwcmV2SXRlbTtcbiAgfVxufVxuXG4vL2NvbnN0IGhhbmRsZUZvcm1TdWJtaXQgPSB3aW5kb3cuaGFuZGxlRm9ybVN1Ym1pdCAvLyBXZSBnb3QgaXQgZnJvbSB0cmFjY29vbiBwcm9qZWN0LlxudmFyIGlzb2Z0ID0gJ2lzb2Z0JztcbnZhciBjbGVhckRlbGF5ID0gOTAwMDAwOyAvLyAxNSBtaW51dGVzXG52YXIgbmRhQ2hlY2tib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VuZF9uZGEnKTtcblxudmFyIGZvcm1XcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0td3JhcCcpO1xudmFyIGZvcm1XcmFwQmFja2dyb3VuZCA9IGZvcm1XcmFwICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGZvcm1XcmFwKS5nZXRQcm9wZXJ0eVZhbHVlKCdiYWNrZ3JvdW5kLWltYWdlJyk7XG52YXIgdGh4TWVzc2FnZXMgPSBbXS5zbGljZS5hcHBseShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtdGh4JykpOyAvLyBIYWNrIGZvciBFZGdlIGFuZCBJRTExXG52YXIgdXBsb2FkRXJyb3JNZXNzYWdlID0gJ1lvdSBjYW4gdXBsb2FkIGRvYywgZG9jeCwgcGRmLCBvZHQsIG90dCwgdHh0IGZpbGVzIHVuZGVyIDI1bWIuJztcbnZhciBub3RpZnlEZWxheSA9IDEwMDAwO1xuXG5mdW5jdGlvbiBOb3RpZnkoKSB7XG4gIHZhciBtZXNzYWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnRGVmYXVsdCBtZXNzYWdlJztcbiAgdmFyIGRlbGF5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAzMDAwO1xuXG4gIHZhciBleGlzdGluZ05vdGlmeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub3RpZnknKTtcbiAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobWVzc2FnZSk7XG4gIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcblxuICBpZiAoZXhpc3RpbmdOb3RpZnkpIGJvZHkucmVtb3ZlQ2hpbGQoZXhpc3RpbmdOb3RpZnkpO1xuXG4gIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnbm90aWZ5Jyk7XG4gIHdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIHJldHVybiBlLnRhcmdldC5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgfSk7XG4gIHdyYXBwZXIuYXBwZW5kQ2hpbGQodGV4dE5vZGUpO1xuXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIHdyYXBwZXIuc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgd3JhcHBlci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgwKSc7XG4gIH0sIDMwMCk7XG5cbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgd3JhcHBlci5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICB3cmFwcGVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDIwMCUpJztcbiAgfSwgZGVsYXkpO1xuXG4gIHJldHVybiBib2R5LmFwcGVuZENoaWxkKHdyYXBwZXIpO1xufVxuXG5mb3JtV3JhcEJhY2tncm91bmQgIT09ICdub25lJyA/IHRoeE1lc3NhZ2VzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgcmV0dXJuIGUuY2xhc3NMaXN0LmFkZCgndGV4dC13aGl0ZScpO1xufSkgOiBudWxsO1xuXG5pZiAobmRhQ2hlY2tib3gpIHtcbiAgbmRhQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIGUudGFyZ2V0LnZhbHVlID09PSAnMScgPyBlLnRhcmdldC52YWx1ZSA9ICcwJyA6IGUudGFyZ2V0LnZhbHVlID0gJzEnO1xuICB9KTtcbn1cblxuJC52YWxpZGF0b3IubWV0aG9kcy5udW1iZXIgPSBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgcmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgfHwgL15bMC05K1xcLSgpIOKAlF0rJC8udGVzdCh2YWx1ZSk7XG59O1xuJC52YWxpZGF0b3IuYWRkTWV0aG9kKCdmaWxlc2l6ZScsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCwgcGFyYW0pIHtcbiAgLy8gcGFyYW0gPSBzaXplIChpbiBieXRlcylcbiAgcmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgfHwgZWxlbWVudC5maWxlc1swXS5zaXplIDw9IHBhcmFtO1xufSk7XG5cbnZhciBoaWRlID0gZnVuY3Rpb24gaGlkZShlbGVtKSB7XG4gIHJldHVybiBlbGVtID8gZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnIDogbnVsbDtcbn07XG52YXIgc2hvdyA9IGZ1bmN0aW9uIHNob3coZWxlbSkge1xuICByZXR1cm4gZWxlbSA/IGVsZW0uc3R5bGUuZGlzcGxheSA9ICdibG9jaycgOiBudWxsO1xufTtcblxuJCgnZm9ybScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAkKHRoaXMpLnZhbGlkYXRlKHtcbiAgICBlcnJvckNsYXNzOiAnaGFzLWVycm9yJyxcbiAgICB2YWxpZENsYXNzOiAnaGFzLXN1Y2Nlc3MnLFxuICAgIHNob3dFcnJvcnM6IGZ1bmN0aW9uIHNob3dFcnJvcnMoZXJyb3JNYXAsIGVycm9yTGlzdCkge1xuICAgICAgaWYgKGVycm9yTWFwWydhdHRhY2gnXSkgTm90aWZ5KHVwbG9hZEVycm9yTWVzc2FnZSwgbm90aWZ5RGVsYXkpO1xuICAgICAgdGhpcy5kZWZhdWx0U2hvd0Vycm9ycygpO1xuICAgIH0sXG4gICAgaGlnaGxpZ2h0OiBmdW5jdGlvbiBoaWdobGlnaHQoZWxlbSwgZXJyb3JDbGFzcywgdmFsaWRDbGFzcykge1xuICAgICAgJChlbGVtKS5wYXJlbnQoKS5hZGRDbGFzcyhlcnJvckNsYXNzKS5yZW1vdmVDbGFzcyh2YWxpZENsYXNzKTtcbiAgICB9LFxuICAgIHVuaGlnaGxpZ2h0OiBmdW5jdGlvbiB1bmhpZ2hsaWdodChlbGVtLCBlcnJvckNsYXNzLCB2YWxpZENsYXNzKSB7XG4gICAgICAkKGVsZW0pLnBhcmVudCgpLnJlbW92ZUNsYXNzKGVycm9yQ2xhc3MpLmFkZENsYXNzKHZhbGlkQ2xhc3MpO1xuICAgIH0sXG4gICAgcnVsZXM6IHtcbiAgICAgIG5hbWU6IHtcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBtYXhsZW5ndGg6IDI1NVxuICAgICAgfSxcbiAgICAgIGxhc3RfbmFtZToge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbWF4bGVuZ3RoOiAyNTVcbiAgICAgIH0sXG4gICAgICBwaG9uZToge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbnVtYmVyOiB0cnVlLFxuICAgICAgICBtYXhsZW5ndGg6IDI1NSxcbiAgICAgICAgbWlubGVuZ3RoOiA1XG4gICAgICB9LFxuICAgICAgY29tcGFueToge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbWF4bGVuZ3RoOiAyNTVcbiAgICAgIH0sXG4gICAgICBwb3NpdGlvbjoge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgbWF4bGVuZ3RoOiAyNTVcbiAgICAgIH0sXG4gICAgICBjb3VudHJ5OiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICB9LFxuICAgICAgc2l6ZToge1xuICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGVtYWlsOiB7XG4gICAgICAgIHJlcXVpcmVkOiB7XG4gICAgICAgICAgZGVwZW5kczogZnVuY3Rpb24gZGVwZW5kcygpIHtcbiAgICAgICAgICAgICQodGhpcykudmFsKCQudHJpbSgkKHRoaXMpLnZhbCgpKSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICBtYXhsZW5ndGg6IDI1NVxuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBtYXhsZW5ndGg6IDY1NTM1XG4gICAgICB9LFxuICAgICAgYXR0YWNoOiB7XG4gICAgICAgIGV4dGVuc2lvbjogJ2RvY3xkb2N4fHBkZnxvZHR8b3R0fHR4dCcsXG4gICAgICAgIGZpbGVzaXplOiAyNSAqIDEwMDAgKiAxMDAwXG4gICAgICB9XG4gICAgfSxcbiAgICBtZXNzYWdlczoge1xuICAgICAgZW1haWw6IHtcbiAgICAgICAgZW1haWw6ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLidcbiAgICAgIH0sXG4gICAgICBhdHRhY2g6IHtcbiAgICAgICAgZmlsZXNpemU6ICdGaWxlIHNob3VsZCBiZSBsZXNzIHRoYW4gMjVtYidcbiAgICAgIH1cbiAgICB9LFxuICAgIHN1Ym1pdEhhbmRsZXI6IGZ1bmN0aW9uIHN1Ym1pdEhhbmRsZXIoZm9ybSkge1xuICAgICAgdmFyIGZpbGVJbnB1dCA9IGZvcm0ucXVlcnlTZWxlY3RvcignI2F0dGFjaCcpO1xuICAgICAgaWYgKGZpbGVJbnB1dCAmJiBmaWxlSW5wdXQuZmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGZpbGVJbnB1dC5yZW1vdmUoKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHJvd0RhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XG4gICAgICB2YXIgdXJsID0gZm9ybS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXJsJyk7XG4gICAgICB2YXIgY29udGFjdEVycm9yTWVzc2FnZSA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmNvbnRhY3RfX2Vycm9yJyk7XG4gICAgICB2YXIgdGh4TWVzc2FnZSA9IGZvcm0ubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgdmFyIHNwaW5uZXIgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLXNwaW5uZXInKTtcbiAgICAgIHZhciBzdWJtaXRCdXR0b24gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19zdWJtaXQnKTtcblxuICAgICAgcm93RGF0YS5hcHBlbmQoJ2hhbmRsZXJfaWQnLCBmb3JtLmRhdGFzZXQuaGFuZGxlcik7XG4gICAgICBpZiAoc3Bpbm5lcikgc3Bpbm5lci5jbGFzc0xpc3QuYWRkKCdqcy1zaG93Jyk7XG5cbiAgICAgIGlmIChmb3JtLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2Zvcm0tY29udGFjdHMnKSB7XG4gICAgICAgIGhpZGUoc3VibWl0QnV0dG9uKTtcbiAgICAgICAgaWYgKGlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShpc29mdCwgSlNPTi5zdHJpbmdpZnkoeyB0aW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSB9KSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgd2luZG93LmhhbmRsZUZvcm1TdWJtaXQodXJsLCByb3dEYXRhLCB7XG4gICAgICAgIHR5cGU6IGZvcm0uZGF0YXNldC50eXBlXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cykge1xuICAgICAgICAgIGhpZGUoZm9ybSk7XG4gICAgICAgICAgc2hvdyh0aHhNZXNzYWdlKTtcbiAgICAgICAgICBpZiAoJChcIiNwaW5lZC1mb3JtLW1haW4tdG9rZW5pemF0aW9uXCIpWzBdKSB7XG4gICAgICAgICAgICB3aW5kb3cuZGF0YUxheWVyLnB1c2goeyAnZXZlbnQnOiAnUmVnaXN0ZXJGb3JtU3VibWl0JyB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LmtleXMocmVzLmRhdGEpLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgT2JqZWN0LmtleXMocmVzLmRhdGEpLm1hcChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dE5hbWUgPSBlcnJvci5zcGxpdCgnLScpWzFdO1xuICAgICAgICAgICAgdmFyIGlucHV0RWxtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltuYW1lPVwiICsgaW5wdXROYW1lICsgXCJdXCIpO1xuICAgICAgICAgICAgdmFyIGlucHV0ID0gaW5wdXRFbG0gPyBpbnB1dEVsbS5wYXJlbnRFbGVtZW50IDogbnVsbDtcbiAgICAgICAgICAgIC8vIGlmIChpbnB1dCkge1xuICAgICAgICAgICAgLy8gICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdoYXMtc3VjY2VzcycpXG4gICAgICAgICAgICAvLyAgIGlucHV0LmNsYXNzTGlzdC5hZGQoJ2hhcy1lcnJvcicpXG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udGFjdEVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9ICdDaGVjayBzZWxlY3RlZCBmaWVsZHMsIHBsZWFzZS4nO1xuICAgICAgICAgIHNob3coY29udGFjdEVycm9yTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3Bpbm5lcikgc3Bpbm5lci5jbGFzc0xpc3QucmVtb3ZlKCdqcy1zaG93Jyk7XG4gICAgICAgIHNob3coc3VibWl0QnV0dG9uKTtcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBzaG93KGNvbnRhY3RFcnJvck1lc3NhZ2UpO1xuICAgICAgICBzaG93KHN1Ym1pdEJ1dHRvbik7XG4gICAgICAgIGlmIChzcGlubmVyKSBzcGlubmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLXNob3cnKTtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5mdW5jdGlvbiBjaGVja1N0b3JhZ2Uoa2V5LCBkZWxheSkge1xuICB2YXIgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgdmFyIHVzZXJUaW1lID0gY2hlY2tLZXlJblN0b3JhZ2Uoa2V5KSA/IGNoZWNrS2V5SW5TdG9yYWdlKGtleSkudGltZSA6IG51bGw7XG4gIHZhciB0dGwgPSB1c2VyVGltZSAmJiB1c2VyVGltZSArIGRlbGF5IC0gY3VycmVudFRpbWU7XG5cbiAgaWYgKHR0bCA8PSAwKSB7XG4gICAgaWYgKGlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlKCkpIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgfVxuICAgIHNob3dNZXNzYWdlSWZXZUtub3dVc2VyKGtleSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tLZXlJblN0b3JhZ2UoZWxlbSkge1xuICBpZiAoaXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUoKSkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGVsZW0pKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoaWRlRm9ybVRpdGxlKCkge1xuICB2YXIgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybUJvdHRvbScpO1xuICBpZiAoY2hlY2tLZXlJblN0b3JhZ2UoaXNvZnQpICYmIHRpdGxlKSB0aXRsZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xufVxuXG5mdW5jdGlvbiBzaG93TWVzc2FnZUlmV2VLbm93VXNlcihlbGVtKSB7XG4gIHZhciBtZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRoYW5rJyk7XG4gIHZhciBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm0tY29udGFjdHMnKTtcbiAgaWYgKCFjaGVja0tleUluU3RvcmFnZShlbGVtKSkge1xuICAgIG1lc3NhZ2UgPyBtZXNzYWdlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScgOiAnJztcbiAgICBmb3JtID8gZm9ybS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnIDogJyc7XG4gIH1cbn1cblxuY2hlY2tTdG9yYWdlKGlzb2Z0LCBjbGVhckRlbGF5KTtcbmhpZGVGb3JtVGl0bGUoKTtcblxudmFyIGZpbGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9ZmlsZV0nKTtcbnZhciBjbGVhckF0dGFjaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbGVhci1hdHRhY2gnKTtcblxuZmlsZUlucHV0ICYmIGZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xuICB2YXIgZmlsZU5hbWUgPSBlLnRhcmdldC52YWx1ZS5zcGxpdCgnXFxcXCcpLnBvcCgpO1xuICB2YXIgbGFiZWwgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy51cGxvYWRfX2xhYmVsJyk7XG4gIHZhciBtYXhMZW5ndGggPSAxNTtcblxuICBpZiAoZmlsZU5hbWUubGVuZ3RoID49IG1heExlbmd0aCkge1xuICAgIGZpbGVOYW1lID0gZmlsZU5hbWUuc2xpY2UoMCwgNSkgKyBcIi4uLlwiICsgZmlsZU5hbWUuc2xpY2UoLTUpO1xuICB9XG5cbiAgZmlsZU5hbWUgPyBsYWJlbC5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MID0gZmlsZU5hbWUgOiBsYWJlbC5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MID0gZS50YXJnZXQuZGF0YXNldC5sYWJlbDtcblxuICBjbGVhckF0dGFjaC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbn0pO1xuXG5jbGVhckF0dGFjaCAmJiBjbGVhckF0dGFjaC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgZmlsZUlucHV0LnZhbHVlID0gJyc7XG4gIHZhciBkZWZhdWx0TGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudXBsb2FkZWRfX3RleHQnKTtcbiAgZGVmYXVsdExhYmVsLmlubmVySFRNTCA9IFwiPGkgY2xhc3M9XFxcImlzb2ktcGFwZXItY2xpcFxcXCI+PC9pPkF0dGFjaCBmaWxlXCI7XG4gIGNsZWFyQXR0YWNoLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG59KTtcblxuLy9UT0RPOiBpbmNhcHN1bGF0ZSB3b3JrIHdpdGggbG9jYWxzdG9yYWdlIHRvIGF2b2lkIGVycm9yc1xuZnVuY3Rpb24gaXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUoKSB7XG4gIHRyeSB7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG52YXIgY2xlYXJTdG9yYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NsZWFyU3RvcmFnZScpO1xuXG5jbGVhclN0b3JhZ2UgJiYgY2xlYXJTdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBpZiAoaXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUoKSkge1xuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICB9XG4gIGxvY2F0aW9uLnJlbG9hZCgpO1xufSk7XG5cbihmdW5jdGlvbiAoKSB7XG4gIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgY2hlY2tBZEJsb2NrKCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gY2hlY2tBZEJsb2NrKCkge1xuICAgIHZhciBmaWVsZEFkQmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hlY2stYnJvd3NlJyk7XG5cbiAgICBpZiAoZmllbGRBZEJsb2NrKSB7XG4gICAgICBpZiAod2luZG93LmNoZWNrQnJvd3NlID09PSB0cnVlKSB7XG4gICAgICAgIGZpZWxkQWRCbG9jay52YWx1ZSA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaWVsZEFkQmxvY2sudmFsdWUgPSAxO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSkoKTsiXX0=
